<svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" contentStyleType="text/css" data-diagram-type="SEQUENCE" height="4222px" preserveAspectRatio="none" style="width:2057px;height:4222px;background:#FEFEFE;" version="1.1" viewBox="0 0 2057 4222" width="2057px" zoomAndPan="magnify"><title>Voice Processing Pipeline - VocalBridge Ops</title><defs/><g><rect fill="#FEFEFE" height="4222" style="stroke:none;stroke-width:1;" width="2057" x="0" y="0"/><text fill="#000000" font-family="Verdana" font-size="22" font-weight="bold" lengthAdjust="spacing" textLength="543.2754" x="755.7891" y="37.1182">Voice Processing Pipeline - VocalBridge Ops</text><g><title>User</title><rect fill="#000000" fill-opacity="0.00000" height="4010.0845" width="8" x="24.9277" y="130.752"/><line style="stroke:#000000;stroke-width:1;stroke-dasharray:5,5;" x1="28" x2="28" y1="130.752" y2="4140.8364"/></g><g><title>Browser</title><rect fill="#000000" fill-opacity="0.00000" height="4010.0845" width="8" x="218.4673" y="130.752"/><line style="stroke:#000000;stroke-width:1;stroke-dasharray:5,5;" x1="221.8999" x2="221.8999" y1="130.752" y2="4140.8364"/></g><g><title>Voice API</title><rect fill="#000000" fill-opacity="0.00000" height="4010.0845" width="8" x="616.7886" y="130.752"/><line style="stroke:#000000;stroke-width:1;stroke-dasharray:5,5;" x1="620.6035" x2="620.6035" y1="130.752" y2="4140.8364"/></g><g><title>STT Service</title><rect fill="#000000" fill-opacity="0.00000" height="4010.0845" width="8" x="876.519" y="130.752"/><line style="stroke:#000000;stroke-width:1;stroke-dasharray:5,5;" x1="879.8232" x2="879.8232" y1="130.752" y2="4140.8364"/></g><g><title>Message Service</title><rect fill="#000000" fill-opacity="0.00000" height="4010.0845" width="8" x="1068.2026" y="130.752"/><line style="stroke:#000000;stroke-width:1;stroke-dasharray:5,5;" x1="1071.8203" x2="1071.8203" y1="130.752" y2="4140.8364"/></g><g><title>AI Provider</title><rect fill="#000000" fill-opacity="0.00000" height="4010.0845" width="8" x="1316.7446" y="130.752"/><line style="stroke:#000000;stroke-width:1;stroke-dasharray:5,5;" x1="1320.5132" x2="1320.5132" y1="130.752" y2="4140.8364"/></g><g><title>TTS Service</title><rect fill="#000000" fill-opacity="0.00000" height="4010.0845" width="8" x="1441.6719" y="130.752"/><line style="stroke:#000000;stroke-width:1;stroke-dasharray:5,5;" x1="1444.9761" x2="1444.9761" y1="130.752" y2="4140.8364"/></g><g><title>File Storage</title><rect fill="#000000" fill-opacity="0.00000" height="4010.0845" width="8" x="1795.4897" y="130.752"/><line style="stroke:#000000;stroke-width:1;stroke-dasharray:5,5;" x1="1799.4795" x2="1799.4795" y1="130.752" y2="4140.8364"/></g><g><title>PostgreSQL</title><rect fill="#000000" fill-opacity="0.00000" height="4010.0845" width="8" x="1894.085" y="130.752"/><line style="stroke:#000000;stroke-width:1;stroke-dasharray:5,5;" x1="1897.5" x2="1897.5" y1="130.752" y2="4140.8364"/></g><g class="participant participant-head" data-participant="User"><text fill="#000000" font-family="Verdana" font-size="14" lengthAdjust="spacing" textLength="31.8555" x="10" y="127.8125">User</text><ellipse cx="28.9277" cy="61.7373" fill="#FFFFFF" rx="8" ry="8" style="stroke:#000000;stroke-width:1;"/><path d="M28.9277,69.7373 L28.9277,96.7373 M15.9277,77.7373 L41.9277,77.7373 M28.9277,96.7373 L15.9277,111.7373 M28.9277,96.7373 L41.9277,111.7373" fill="none" style="stroke:#000000;stroke-width:1;"/></g><g class="participant participant-tail" data-participant="User"><text fill="#000000" font-family="Verdana" font-size="14" lengthAdjust="spacing" textLength="31.8555" x="10" y="4153.9116">User</text><ellipse cx="28.9277" cy="4165.8511" fill="#FFFFFF" rx="8" ry="8" style="stroke:#000000;stroke-width:1;"/><path d="M28.9277,4173.8511 L28.9277,4200.8511 M15.9277,4181.8511 L41.9277,4181.8511 M28.9277,4200.8511 L15.9277,4215.8511 M28.9277,4200.8511 L41.9277,4215.8511" fill="none" style="stroke:#000000;stroke-width:1;"/></g><g class="participant participant-head" data-participant="BR"><rect fill="#FFFFFF" height="48.0293" rx="2.5" ry="2.5" style="stroke:#000000;stroke-width:1;" width="71.1348" x="186.8999" y="81.7227"/><text fill="#000000" font-family="Verdana" font-size="14" lengthAdjust="spacing" textLength="57.1348" x="193.8999" y="102.7979">Browser</text><text fill="#000000" font-family="Verdana" font-size="14" lengthAdjust="spacing" textLength="52.0078" x="196.4634" y="119.8125">(React)</text></g><g class="participant participant-tail" data-participant="BR"><rect fill="#FFFFFF" height="48.0293" rx="2.5" ry="2.5" style="stroke:#000000;stroke-width:1;" width="71.1348" x="186.8999" y="4139.8364"/><text fill="#000000" font-family="Verdana" font-size="14" lengthAdjust="spacing" textLength="57.1348" x="193.8999" y="4160.9116">Browser</text><text fill="#000000" font-family="Verdana" font-size="14" lengthAdjust="spacing" textLength="52.0078" x="196.4634" y="4177.9263">(React)</text></g><g class="participant participant-head" data-participant="VA"><rect fill="#FFFFFF" height="31.0146" rx="2.5" ry="2.5" style="stroke:#000000;stroke-width:1;" width="80.3701" x="580.6035" y="98.7373"/><text fill="#000000" font-family="Verdana" font-size="14" lengthAdjust="spacing" textLength="66.3701" x="587.6035" y="119.8125">Voice API</text></g><g class="participant participant-tail" data-participant="VA"><rect fill="#FFFFFF" height="31.0146" rx="2.5" ry="2.5" style="stroke:#000000;stroke-width:1;" width="80.3701" x="580.6035" y="4139.8364"/><text fill="#000000" font-family="Verdana" font-size="14" lengthAdjust="spacing" textLength="66.3701" x="587.6035" y="4160.9116">Voice API</text></g><g class="participant participant-head" data-participant="STT"><rect fill="#FFFFFF" height="48.0293" rx="2.5" ry="2.5" style="stroke:#000000;stroke-width:1;" width="97.3916" x="831.8232" y="81.7227"/><text fill="#000000" font-family="Verdana" font-size="14" lengthAdjust="spacing" textLength="83.3916" x="838.8232" y="102.7979">STT Service</text><text fill="#000000" font-family="Verdana" font-size="14" lengthAdjust="spacing" textLength="65.6523" x="847.6929" y="119.8125">(Mocked)</text></g><g class="participant participant-tail" data-participant="STT"><rect fill="#FFFFFF" height="48.0293" rx="2.5" ry="2.5" style="stroke:#000000;stroke-width:1;" width="97.3916" x="831.8232" y="4139.8364"/><text fill="#000000" font-family="Verdana" font-size="14" lengthAdjust="spacing" textLength="83.3916" x="838.8232" y="4160.9116">STT Service</text><text fill="#000000" font-family="Verdana" font-size="14" lengthAdjust="spacing" textLength="65.6523" x="847.6929" y="4177.9263">(Mocked)</text></g><g class="participant participant-head" data-participant="MS"><rect fill="#FFFFFF" height="31.0146" rx="2.5" ry="2.5" style="stroke:#000000;stroke-width:1;" width="130.7646" x="1006.8203" y="98.7373"/><text fill="#000000" font-family="Verdana" font-size="14" lengthAdjust="spacing" textLength="116.7646" x="1013.8203" y="119.8125">Message Service</text></g><g class="participant participant-tail" data-participant="MS"><rect fill="#FFFFFF" height="31.0146" rx="2.5" ry="2.5" style="stroke:#000000;stroke-width:1;" width="130.7646" x="1006.8203" y="4139.8364"/><text fill="#000000" font-family="Verdana" font-size="14" lengthAdjust="spacing" textLength="116.7646" x="1013.8203" y="4160.9116">Message Service</text></g><g class="participant participant-head" data-participant="AI"><rect fill="#FFFFFF" height="31.0146" rx="2.5" ry="2.5" style="stroke:#000000;stroke-width:1;" width="92.4629" x="1274.5132" y="98.7373"/><text fill="#000000" font-family="Verdana" font-size="14" lengthAdjust="spacing" textLength="78.4629" x="1281.5132" y="119.8125">AI Provider</text></g><g class="participant participant-tail" data-participant="AI"><rect fill="#FFFFFF" height="31.0146" rx="2.5" ry="2.5" style="stroke:#000000;stroke-width:1;" width="92.4629" x="1274.5132" y="4139.8364"/><text fill="#000000" font-family="Verdana" font-size="14" lengthAdjust="spacing" textLength="78.4629" x="1281.5132" y="4160.9116">AI Provider</text></g><g class="participant participant-head" data-participant="TTS"><rect fill="#FFFFFF" height="48.0293" rx="2.5" ry="2.5" style="stroke:#000000;stroke-width:1;" width="97.3916" x="1396.9761" y="81.7227"/><text fill="#000000" font-family="Verdana" font-size="14" lengthAdjust="spacing" textLength="83.3916" x="1403.9761" y="102.7979">TTS Service</text><text fill="#000000" font-family="Verdana" font-size="14" lengthAdjust="spacing" textLength="65.6523" x="1412.8457" y="119.8125">(Mocked)</text></g><g class="participant participant-tail" data-participant="TTS"><rect fill="#FFFFFF" height="48.0293" rx="2.5" ry="2.5" style="stroke:#000000;stroke-width:1;" width="97.3916" x="1396.9761" y="4139.8364"/><text fill="#000000" font-family="Verdana" font-size="14" lengthAdjust="spacing" textLength="83.3916" x="1403.9761" y="4160.9116">TTS Service</text><text fill="#000000" font-family="Verdana" font-size="14" lengthAdjust="spacing" textLength="65.6523" x="1412.8457" y="4177.9263">(Mocked)</text></g><g class="participant participant-head" data-participant="FS"><text fill="#000000" font-family="Verdana" font-size="14" lengthAdjust="spacing" textLength="84.0205" x="1754.4795" y="127.8125">File Storage</text><path d="M1781.4897,77.7373 C1781.4897,67.7373 1799.4897,67.7373 1799.4897,67.7373 C1799.4897,67.7373 1817.4897,67.7373 1817.4897,77.7373 L1817.4897,103.7373 C1817.4897,113.7373 1799.4897,113.7373 1799.4897,113.7373 C1799.4897,113.7373 1781.4897,113.7373 1781.4897,103.7373 L1781.4897,77.7373" fill="#FFFFFF" style="stroke:#000000;stroke-width:1;"/><path d="M1781.4897,77.7373 C1781.4897,87.7373 1799.4897,87.7373 1799.4897,87.7373 C1799.4897,87.7373 1817.4897,87.7373 1817.4897,77.7373" fill="none" style="stroke:#000000;stroke-width:1;"/></g><g class="participant participant-tail" data-participant="FS"><text fill="#000000" font-family="Verdana" font-size="14" lengthAdjust="spacing" textLength="84.0205" x="1754.4795" y="4153.9116">File Storage</text><path d="M1781.4897,4166.8511 C1781.4897,4156.8511 1799.4897,4156.8511 1799.4897,4156.8511 C1799.4897,4156.8511 1817.4897,4156.8511 1817.4897,4166.8511 L1817.4897,4192.8511 C1817.4897,4202.8511 1799.4897,4202.8511 1799.4897,4202.8511 C1799.4897,4202.8511 1781.4897,4202.8511 1781.4897,4192.8511 L1781.4897,4166.8511" fill="#FFFFFF" style="stroke:#000000;stroke-width:1;"/><path d="M1781.4897,4166.8511 C1781.4897,4176.8511 1799.4897,4176.8511 1799.4897,4176.8511 C1799.4897,4176.8511 1817.4897,4176.8511 1817.4897,4166.8511" fill="none" style="stroke:#000000;stroke-width:1;"/></g><g class="participant participant-head" data-participant="DB"><text fill="#000000" font-family="Verdana" font-size="14" lengthAdjust="spacing" textLength="81.1699" x="1854.5" y="127.8125">PostgreSQL</text><path d="M1880.085,77.7373 C1880.085,67.7373 1898.085,67.7373 1898.085,67.7373 C1898.085,67.7373 1916.085,67.7373 1916.085,77.7373 L1916.085,103.7373 C1916.085,113.7373 1898.085,113.7373 1898.085,113.7373 C1898.085,113.7373 1880.085,113.7373 1880.085,103.7373 L1880.085,77.7373" fill="#FFFFFF" style="stroke:#000000;stroke-width:1;"/><path d="M1880.085,77.7373 C1880.085,87.7373 1898.085,87.7373 1898.085,87.7373 C1898.085,87.7373 1916.085,87.7373 1916.085,77.7373" fill="none" style="stroke:#000000;stroke-width:1;"/></g><g class="participant participant-tail" data-participant="DB"><text fill="#000000" font-family="Verdana" font-size="14" lengthAdjust="spacing" textLength="81.1699" x="1854.5" y="4153.9116">PostgreSQL</text><path d="M1880.085,4166.8511 C1880.085,4156.8511 1898.085,4156.8511 1898.085,4156.8511 C1898.085,4156.8511 1916.085,4156.8511 1916.085,4166.8511 L1916.085,4192.8511 C1916.085,4202.8511 1898.085,4202.8511 1898.085,4202.8511 C1898.085,4202.8511 1880.085,4202.8511 1880.085,4192.8511 L1880.085,4166.8511" fill="#FFFFFF" style="stroke:#000000;stroke-width:1;"/><path d="M1880.085,4166.8511 C1880.085,4176.8511 1898.085,4176.8511 1898.085,4176.8511 C1898.085,4176.8511 1916.085,4176.8511 1916.085,4166.8511" fill="none" style="stroke:#000000;stroke-width:1;"/></g><rect fill="#FFFFFF" height="3" style="stroke:#FFFFFF;stroke-width:1;" width="2045.8535" x="5" y="161.6516"/><line style="stroke:#000000;stroke-width:0.5;" x1="5" x2="2050.8535" y1="161.6516" y2="161.6516"/><line style="stroke:#000000;stroke-width:0.5;" x1="5" x2="2050.8535" y1="164.6516" y2="164.6516"/><rect fill="#FFFFFF" height="23.7993" style="stroke:#000000;stroke-width:1;" width="202.6523" x="926.6006" y="150.752"/><text fill="#000000" font-family="Verdana" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="184.209" x="932.6006" y="167.8218">Voice Input: User Speaks</text><g class="message" data-participant-1="User" data-participant-2="BR"><polygon fill="#000000" points="210.4673,233.9492,220.4673,237.9492,210.4673,241.9492,214.4673,237.9492" style="stroke:#000000;stroke-width:1;"/><line style="stroke:#000000;stroke-width:1;" x1="28.9277" x2="216.4673" y1="237.9492" y2="237.9492"/><text fill="#000000" font-family="Verdana" font-size="13" lengthAdjust="spacing" textLength="150.7886" x="35.9277" y="201.6211">Speak into microphone</text><text fill="#000000" font-family="Verdana" font-size="13" lengthAdjust="spacing" textLength="124.9473" x="35.9277" y="217.4204">"What is the status</text><text fill="#000000" font-family="Verdana" font-size="13" lengthAdjust="spacing" textLength="89.8257" x="35.9277" y="233.2197">of my order?"</text></g><g class="message" data-participant-1="BR" data-participant-2="BR"><line style="stroke:#000000;stroke-width:1;" x1="222.4673" x2="264.4673" y1="299.3472" y2="299.3472"/><line style="stroke:#000000;stroke-width:1;" x1="264.4673" x2="264.4673" y1="299.3472" y2="312.3472"/><line style="stroke:#000000;stroke-width:1;" x1="223.4673" x2="264.4673" y1="312.3472" y2="312.3472"/><polygon fill="#000000" points="233.4673,308.3472,223.4673,312.3472,233.4673,316.3472,229.4673,312.3472" style="stroke:#000000;stroke-width:1;"/><text fill="#000000" font-family="Verdana" font-size="13" lengthAdjust="spacing" textLength="123.3286" x="229.4673" y="263.019">MediaRecorder API</text><text fill="#000000" font-family="Verdana" font-size="13" lengthAdjust="spacing" textLength="146.7451" x="229.4673" y="278.8184">captures audio chunks</text><text fill="#000000" font-family="Verdana" font-size="13" lengthAdjust="spacing" textLength="135.9795" x="229.4673" y="294.6177">(webm/opus format)</text></g><g class="message" data-participant-1="BR" data-participant-2="BR"><line style="stroke:#000000;stroke-width:1;" x1="222.4673" x2="264.4673" y1="357.9458" y2="357.9458"/><line style="stroke:#000000;stroke-width:1;" x1="264.4673" x2="264.4673" y1="357.9458" y2="370.9458"/><line style="stroke:#000000;stroke-width:1;" x1="223.4673" x2="264.4673" y1="370.9458" y2="370.9458"/><polygon fill="#000000" points="233.4673,366.9458,223.4673,370.9458,233.4673,374.9458,229.4673,370.9458" style="stroke:#000000;stroke-width:1;"/><text fill="#000000" font-family="Verdana" font-size="13" lengthAdjust="spacing" textLength="96.0654" x="229.4673" y="337.417">Stop recording</text><text fill="#000000" font-family="Verdana" font-size="13" lengthAdjust="spacing" textLength="147.1069" x="229.4673" y="353.2163">(2.5 seconds of audio)</text></g><g class="message" data-participant-1="BR" data-participant-2="BR"><line style="stroke:#000000;stroke-width:1;" x1="222.4673" x2="264.4673" y1="416.5444" y2="416.5444"/><line style="stroke:#000000;stroke-width:1;" x1="264.4673" x2="264.4673" y1="416.5444" y2="429.5444"/><line style="stroke:#000000;stroke-width:1;" x1="223.4673" x2="264.4673" y1="429.5444" y2="429.5444"/><polygon fill="#000000" points="233.4673,425.5444,223.4673,429.5444,233.4673,433.5444,229.4673,429.5444" style="stroke:#000000;stroke-width:1;"/><text fill="#000000" font-family="Verdana" font-size="13" lengthAdjust="spacing" textLength="76.083" x="229.4673" y="396.0156">Create Blob</text><text fill="#000000" font-family="Verdana" font-size="13" lengthAdjust="spacing" textLength="121.3037" x="229.4673" y="411.8149">from audio chunks</text></g><rect fill="#FFFFFF" height="3" style="stroke:#FFFFFF;stroke-width:1;" width="2045.8535" x="5" y="458.4441"/><line style="stroke:#000000;stroke-width:0.5;" x1="5" x2="2050.8535" y1="458.4441" y2="458.4441"/><line style="stroke:#000000;stroke-width:0.5;" x1="5" x2="2050.8535" y1="461.4441" y2="461.4441"/><rect fill="#FFFFFF" height="23.7993" style="stroke:#000000;stroke-width:1;" width="115.4863" x="970.1836" y="447.5444"/><text fill="#000000" font-family="Verdana" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="97.043" x="976.1836" y="464.6143">Upload Audio</text><g class="message" data-participant-1="BR" data-participant-2="VA"><polygon fill="#000000" points="608.7886,546.541,618.7886,550.541,608.7886,554.541,612.7886,550.541" style="stroke:#000000;stroke-width:1;"/><line style="stroke:#000000;stroke-width:1;" x1="222.4673" x2="614.7886" y1="550.541" y2="550.541"/><text fill="#000000" font-family="Verdana" font-size="13" lengthAdjust="spacing" textLength="212.6021" x="229.4673" y="498.4136">POST /sessions/:id/voice/upload</text><text fill="#000000" font-family="Verdana" font-size="13" lengthAdjust="spacing" textLength="260.2222" x="229.4673" y="514.2129">X-Idempotency-Key: voice_unique_789</text><text fill="#000000" font-family="Verdana" font-size="13" lengthAdjust="spacing" textLength="230.3374" x="229.4673" y="530.0122">Content-Type: multipart/form-data</text><text fill="#000000" font-family="Verdana" font-size="13" lengthAdjust="spacing" textLength="162.9951" x="229.4673" y="545.8115">audio: [binary audio file]</text></g><path d="M625,491.2434 L625,548.2434 L793,548.2434 L793,501.2434 L783,491.2434 L625,491.2434" fill="#FFFFFF" style="stroke:#000000;stroke-width:1;"/><path d="M783,491.2434 L783,501.2434 L793,501.2434 L783,491.2434" fill="#FFFFFF" style="stroke:#000000;stroke-width:1;"/><text fill="#000000" font-family="Verdana" font-size="13" lengthAdjust="spacing" textLength="147.0308" x="631" y="509.3132">Idempotency prevents</text><text fill="#000000" font-family="Verdana" font-size="13" lengthAdjust="spacing" textLength="133.0723" x="631" y="525.1125">duplicate processing</text><text fill="#000000" font-family="Verdana" font-size="13" lengthAdjust="spacing" textLength="92.1616" x="631" y="540.9119">of same audio</text><g class="message" data-participant-1="VA" data-participant-2="VA"><line style="stroke:#000000;stroke-width:1;" x1="620.7886" x2="662.7886" y1="596.1396" y2="596.1396"/><line style="stroke:#000000;stroke-width:1;" x1="662.7886" x2="662.7886" y1="596.1396" y2="609.1396"/><line style="stroke:#000000;stroke-width:1;" x1="621.7886" x2="662.7886" y1="609.1396" y2="609.1396"/><polygon fill="#000000" points="631.7886,605.1396,621.7886,609.1396,631.7886,613.1396,627.7886,609.1396" style="stroke:#000000;stroke-width:1;"/><text fill="#000000" font-family="Verdana" font-size="13" lengthAdjust="spacing" textLength="140.918" x="627.7886" y="575.6108">Validate audio format</text><text fill="#000000" font-family="Verdana" font-size="13" lengthAdjust="spacing" textLength="124.6807" x="627.7886" y="591.4102">(webm, wav, mp3)</text></g><g class="message" data-participant-1="VA" data-participant-2="FS"><polygon fill="#000000" points="1787.4897,650.7383,1797.4897,654.7383,1787.4897,658.7383,1791.4897,654.7383" style="stroke:#000000;stroke-width:1;"/><line style="stroke:#000000;stroke-width:1;" x1="620.7886" x2="1793.4897" y1="654.7383" y2="654.7383"/><text fill="#000000" font-family="Verdana" font-size="13" lengthAdjust="spacing" textLength="99.3726" x="627.7886" y="634.2095">Store audio file</text><text fill="#000000" font-family="Verdana" font-size="13" lengthAdjust="spacing" textLength="287.8472" x="627.7886" y="650.0088">/uploads/audio/USER_INPUT_abc123.webm</text></g><g class="message" data-participant-1="FS" data-participant-2="VA"><polygon fill="#000000" points="631.7886,680.5376,621.7886,684.5376,631.7886,688.5376,627.7886,684.5376" style="stroke:#000000;stroke-width:1;"/><line style="stroke:#000000;stroke-width:1;stroke-dasharray:2,2;" x1="625.7886" x2="1798.4897" y1="684.5376" y2="684.5376"/><text fill="#000000" font-family="Verdana" font-size="13" lengthAdjust="spacing" textLength="56.1768" x="637.7886" y="679.8081">File path</text></g><g class="message" data-participant-1="VA" data-participant-2="DB"><polygon fill="#000000" points="1886.085,741.9355,1896.085,745.9355,1886.085,749.9355,1890.085,745.9355" style="stroke:#000000;stroke-width:1;"/><line style="stroke:#000000;stroke-width:1;" x1="620.7886" x2="1892.085" y1="745.9355" y2="745.9355"/><text fill="#000000" font-family="Verdana" font-size="13" lengthAdjust="spacing" textLength="150.8711" x="627.7886" y="709.6074">INSERT audio_artifacts</text><text fill="#000000" font-family="Verdana" font-size="13" lengthAdjust="spacing" textLength="204.8706" x="627.7886" y="725.4067">(sessionId, type: USER_INPUT,</text><text fill="#000000" font-family="Verdana" font-size="13" lengthAdjust="spacing" textLength="188.7476" x="627.7886" y="741.2061">filePath, durationMs, format)</text></g><g class="message" data-participant-1="DB" data-participant-2="VA"><polygon fill="#000000" points="631.7886,771.7349,621.7886,775.7349,631.7886,779.7349,627.7886,775.7349" style="stroke:#000000;stroke-width:1;"/><line style="stroke:#000000;stroke-width:1;stroke-dasharray:2,2;" x1="625.7886" x2="1897.085" y1="775.7349" y2="775.7349"/><text fill="#000000" font-family="Verdana" font-size="13" lengthAdjust="spacing" textLength="170.9995" x="637.7886" y="771.0054">artifactId = audio_abc123</text></g><path d="M625,788.7349 L625,813.7349 L787,813.7349 L787,798.7349 L777,788.7349 L625,788.7349" fill="#FFFFFF" style="stroke:#000000;stroke-width:1;"/><path d="M777,788.7349 L777,798.7349 L787,798.7349 L777,788.7349" fill="#FFFFFF" style="stroke:#000000;stroke-width:1;"/><text fill="#000000" font-family="Verdana" font-size="13" lengthAdjust="spacing" textLength="141.4004" x="631" y="806.8047">Start latency tracking</text><g class="message" data-participant-1="VA" data-participant-2="VA"><line style="stroke:#000000;stroke-width:1;" x1="620.7886" x2="662.7886" y1="841.3335" y2="841.3335"/><line style="stroke:#000000;stroke-width:1;" x1="662.7886" x2="662.7886" y1="841.3335" y2="854.3335"/><line style="stroke:#000000;stroke-width:1;" x1="621.7886" x2="662.7886" y1="854.3335" y2="854.3335"/><polygon fill="#000000" points="631.7886,850.3335,621.7886,854.3335,631.7886,858.3335,627.7886,854.3335" style="stroke:#000000;stroke-width:1;"/><text fill="#000000" font-family="Verdana" font-size="13" lengthAdjust="spacing" textLength="120.6816" x="627.7886" y="836.604">startTime = now()</text></g><rect fill="#FFFFFF" height="3" style="stroke:#FFFFFF;stroke-width:1;" width="2045.8535" x="5" y="883.2332"/><line style="stroke:#000000;stroke-width:0.5;" x1="5" x2="2050.8535" y1="883.2332" y2="883.2332"/><line style="stroke:#000000;stroke-width:0.5;" x1="5" x2="2050.8535" y1="886.2332" y2="886.2332"/><rect fill="#FFFFFF" height="23.7993" style="stroke:#000000;stroke-width:1;" width="175.916" x="939.9688" y="872.3335"/><text fill="#000000" font-family="Verdana" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="157.4727" x="945.9688" y="889.4033">Speech-to-Text (STT)</text><g class="message" data-participant-1="VA" data-participant-2="STT"><polygon fill="#000000" points="868.519,923.9321,878.519,927.9321,868.519,931.9321,872.519,927.9321" style="stroke:#000000;stroke-width:1;"/><line style="stroke:#000000;stroke-width:1;" x1="620.7886" x2="874.519" y1="927.9321" y2="927.9321"/><text fill="#000000" font-family="Verdana" font-size="13" lengthAdjust="spacing" textLength="163.9536" x="627.7886" y="923.2026">transcribe(audioFilePath)</text></g><g class="message" data-participant-1="STT" data-participant-2="FS"><polygon fill="#000000" points="1787.4897,953.7314,1797.4897,957.7314,1787.4897,961.7314,1791.4897,957.7314" style="stroke:#000000;stroke-width:1;"/><line style="stroke:#000000;stroke-width:1;" x1="880.519" x2="1793.4897" y1="957.7314" y2="957.7314"/><text fill="#000000" font-family="Verdana" font-size="13" lengthAdjust="spacing" textLength="96.8716" x="887.519" y="953.002">Read audio file</text></g><g class="message" data-participant-1="FS" data-participant-2="STT"><polygon fill="#000000" points="891.519,983.5308,881.519,987.5308,891.519,991.5308,887.519,987.5308" style="stroke:#000000;stroke-width:1;"/><line style="stroke:#000000;stroke-width:1;stroke-dasharray:2,2;" x1="885.519" x2="1798.4897" y1="987.5308" y2="987.5308"/><text fill="#000000" font-family="Verdana" font-size="13" lengthAdjust="spacing" textLength="70.0781" x="897.519" y="982.8013">Audio data</text></g><g class="message" data-participant-1="STT" data-participant-2="STT"><line style="stroke:#000000;stroke-width:1;" x1="880.519" x2="922.519" y1="1048.9287" y2="1048.9287"/><line style="stroke:#000000;stroke-width:1;" x1="922.519" x2="922.519" y1="1048.9287" y2="1061.9287"/><line style="stroke:#000000;stroke-width:1;" x1="881.519" x2="922.519" y1="1061.9287" y2="1061.9287"/><polygon fill="#000000" points="891.519,1057.9287,881.519,1061.9287,891.519,1065.9287,887.519,1061.9287" style="stroke:#000000;stroke-width:1;"/><text fill="#000000" font-family="Verdana" font-size="13" lengthAdjust="spacing" textLength="136.8555" x="887.519" y="1012.6006">Mock STT processing</text><text fill="#000000" font-family="Verdana" font-size="13" lengthAdjust="spacing" textLength="168.5557" x="887.519" y="1028.3999">(simulates realistic delay:</text><text fill="#000000" font-family="Verdana" font-size="13" lengthAdjust="spacing" textLength="80.812" x="887.519" y="1044.1992">100-300ms)</text></g><g class="message" data-participant-1="STT" data-participant-2="STT"><line style="stroke:#000000;stroke-width:1;" x1="880.519" x2="922.519" y1="1123.3267" y2="1123.3267"/><line style="stroke:#000000;stroke-width:1;" x1="922.519" x2="922.519" y1="1123.3267" y2="1136.3267"/><line style="stroke:#000000;stroke-width:1;" x1="881.519" x2="922.519" y1="1136.3267" y2="1136.3267"/><polygon fill="#000000" points="891.519,1132.3267,881.519,1136.3267,891.519,1140.3267,887.519,1136.3267" style="stroke:#000000;stroke-width:1;"/><text fill="#000000" font-family="Verdana" font-size="13" lengthAdjust="spacing" textLength="127.1753" x="887.519" y="1086.9985">Generate transcript</text><text fill="#000000" font-family="Verdana" font-size="13" lengthAdjust="spacing" textLength="152.2422" x="887.519" y="1102.7979">from canned responses</text><text fill="#000000" font-family="Verdana" font-size="13" lengthAdjust="spacing" textLength="177.6836" x="887.519" y="1118.5972">or simple pattern matching</text></g><g class="message" data-participant-1="STT" data-participant-2="VA"><polygon fill="#000000" points="631.7886,1256.9219,621.7886,1260.9219,631.7886,1264.9219,627.7886,1260.9219" style="stroke:#000000;stroke-width:1;"/><line style="stroke:#000000;stroke-width:1;stroke-dasharray:2,2;" x1="625.7886" x2="879.519" y1="1260.9219" y2="1260.9219"/><text fill="#000000" font-family="Verdana" font-size="13" lengthAdjust="spacing" textLength="107.0278" x="637.7886" y="1161.3965">Transcript result</text><text fill="#000000" font-family="Verdana" font-size="13" lengthAdjust="spacing" textLength="8.252" x="637.7886" y="1177.1958">{</text><text fill="#000000" font-family="Verdana" font-size="13" lengthAdjust="spacing" textLength="198.0088" x="646.9292" y="1192.9951">transcript: "What is the status</text><text fill="#000000" font-family="Verdana" font-size="13" lengthAdjust="spacing" textLength="94.5547" x="701.7729" y="1208.7944">of my order?",</text><text fill="#000000" font-family="Verdana" font-size="13" lengthAdjust="spacing" textLength="114.3403" x="646.9292" y="1224.5938">confidence: 0.95,</text><text fill="#000000" font-family="Verdana" font-size="13" lengthAdjust="spacing" textLength="155.0732" x="646.9292" y="1240.3931">languageCode: "en-US"</text><text fill="#000000" font-family="Verdana" font-size="13" lengthAdjust="spacing" textLength="8.252" x="637.7886" y="1256.1924">}</text></g><g class="message" data-participant-1="VA" data-participant-2="VA"><line style="stroke:#000000;stroke-width:1;" x1="620.7886" x2="662.7886" y1="1290.7212" y2="1290.7212"/><line style="stroke:#000000;stroke-width:1;" x1="662.7886" x2="662.7886" y1="1290.7212" y2="1303.7212"/><line style="stroke:#000000;stroke-width:1;" x1="621.7886" x2="662.7886" y1="1303.7212" y2="1303.7212"/><polygon fill="#000000" points="631.7886,1299.7212,621.7886,1303.7212,631.7886,1307.7212,627.7886,1303.7212" style="stroke:#000000;stroke-width:1;"/><text fill="#000000" font-family="Verdana" font-size="13" lengthAdjust="spacing" textLength="221.0762" x="627.7886" y="1285.9917">sttLatencyMs = now() - startTime</text></g><g class="message" data-participant-1="VA" data-participant-2="DB"><polygon fill="#000000" points="1886.085,1376.9185,1896.085,1380.9185,1886.085,1384.9185,1890.085,1380.9185" style="stroke:#000000;stroke-width:1;"/><line style="stroke:#000000;stroke-width:1;" x1="620.7886" x2="1892.085" y1="1380.9185" y2="1380.9185"/><text fill="#000000" font-family="Verdana" font-size="13" lengthAdjust="spacing" textLength="154.0068" x="627.7886" y="1328.791">UPDATE audio_artifacts</text><text fill="#000000" font-family="Verdana" font-size="13" lengthAdjust="spacing" textLength="123.8745" x="627.7886" y="1344.5903">SET transcript = ?,</text><text fill="#000000" font-family="Verdana" font-size="13" lengthAdjust="spacing" textLength="150.9155" x="627.7886" y="1360.3896">provider = "mock_stt",</text><text fill="#000000" font-family="Verdana" font-size="13" lengthAdjust="spacing" textLength="91.5332" x="627.7886" y="1376.189">latencyMs = ?</text></g><rect fill="#FFFFFF" height="3" style="stroke:#FFFFFF;stroke-width:1;" width="2045.8535" x="5" y="1409.8181"/><line style="stroke:#000000;stroke-width:0.5;" x1="5" x2="2050.8535" y1="1409.8181" y2="1409.8181"/><line style="stroke:#000000;stroke-width:0.5;" x1="5" x2="2050.8535" y1="1412.8181" y2="1412.8181"/><rect fill="#FFFFFF" height="23.7993" style="stroke:#000000;stroke-width:1;" width="171.2188" x="942.3174" y="1398.9185"/><text fill="#000000" font-family="Verdana" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="152.7754" x="948.3174" y="1415.9883">Create User Message</text><g class="message" data-participant-1="VA" data-participant-2="MS"><polygon fill="#000000" points="1060.2026,1497.915,1070.2026,1501.915,1060.2026,1505.915,1064.2026,1501.915" style="stroke:#000000;stroke-width:1;"/><line style="stroke:#000000;stroke-width:1;" x1="620.7886" x2="1066.2026" y1="1501.915" y2="1501.915"/><text fill="#000000" font-family="Verdana" font-size="13" lengthAdjust="spacing" textLength="168.5874" x="627.7886" y="1449.7876">createMessage(sessionId,</text><text fill="#000000" font-family="Verdana" font-size="13" lengthAdjust="spacing" textLength="75.6133" x="627.7886" y="1465.5869">role: USER,</text><text fill="#000000" font-family="Verdana" font-size="13" lengthAdjust="spacing" textLength="126.896" x="627.7886" y="1481.3862">content: transcript,</text><text fill="#000000" font-family="Verdana" font-size="13" lengthAdjust="spacing" textLength="102.4639" x="627.7886" y="1497.1855">audioArtifactId)</text></g><g class="message" data-participant-1="MS" data-participant-2="DB"><polygon fill="#000000" points="1886.085,1527.7144,1896.085,1531.7144,1886.085,1535.7144,1890.085,1531.7144" style="stroke:#000000;stroke-width:1;"/><line style="stroke:#000000;stroke-width:1;" x1="1072.2026" x2="1892.085" y1="1531.7144" y2="1531.7144"/><text fill="#000000" font-family="Verdana" font-size="13" lengthAdjust="spacing" textLength="177.2646" x="1079.2026" y="1526.9849">Get next sequence number</text></g><g class="message" data-participant-1="DB" data-participant-2="MS"><polygon fill="#000000" points="1083.2026,1557.5137,1073.2026,1561.5137,1083.2026,1565.5137,1079.2026,1561.5137" style="stroke:#000000;stroke-width:1;"/><line style="stroke:#000000;stroke-width:1;stroke-dasharray:2,2;" x1="1077.2026" x2="1897.085" y1="1561.5137" y2="1561.5137"/><text fill="#000000" font-family="Verdana" font-size="13" lengthAdjust="spacing" textLength="141.3623" x="1089.2026" y="1556.7842">sequenceNumber = 5</text></g><g class="message" data-participant-1="MS" data-participant-2="DB"><polygon fill="#000000" points="1886.085,1634.7109,1896.085,1638.7109,1886.085,1642.7109,1890.085,1638.7109" style="stroke:#000000;stroke-width:1;"/><line style="stroke:#000000;stroke-width:1;" x1="1072.2026" x2="1892.085" y1="1638.7109" y2="1638.7109"/><text fill="#000000" font-family="Verdana" font-size="13" lengthAdjust="spacing" textLength="118.2822" x="1079.2026" y="1586.5835">INSERT messages</text><text fill="#000000" font-family="Verdana" font-size="13" lengthAdjust="spacing" textLength="152.1343" x="1079.2026" y="1602.3828">(sessionId, role: USER,</text><text fill="#000000" font-family="Verdana" font-size="13" lengthAdjust="spacing" textLength="159.6943" x="1079.2026" y="1618.1821">content, audioArtifactId,</text><text fill="#000000" font-family="Verdana" font-size="13" lengthAdjust="spacing" textLength="119.2217" x="1079.2026" y="1633.9814">sequenceNumber)</text></g><g class="message" data-participant-1="DB" data-participant-2="MS"><polygon fill="#000000" points="1083.2026,1664.5103,1073.2026,1668.5103,1083.2026,1672.5103,1079.2026,1668.5103" style="stroke:#000000;stroke-width:1;"/><line style="stroke:#000000;stroke-width:1;stroke-dasharray:2,2;" x1="1077.2026" x2="1897.085" y1="1668.5103" y2="1668.5103"/><text fill="#000000" font-family="Verdana" font-size="13" lengthAdjust="spacing" textLength="215.1538" x="1089.2026" y="1663.7808">Message stored (msg_user_123)</text></g><rect fill="#FFFFFF" height="3" style="stroke:#FFFFFF;stroke-width:1;" width="2045.8535" x="5" y="1697.4099"/><line style="stroke:#000000;stroke-width:0.5;" x1="5" x2="2050.8535" y1="1697.4099" y2="1697.4099"/><line style="stroke:#000000;stroke-width:0.5;" x1="5" x2="2050.8535" y1="1700.4099" y2="1700.4099"/><rect fill="#FFFFFF" height="23.7993" style="stroke:#000000;stroke-width:1;" width="243.4932" x="906.1802" y="1686.5103"/><text fill="#000000" font-family="Verdana" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="225.0498" x="912.1802" y="1703.5801">AI Processing (Standard Flow)</text><path d="M625,1725.3096 L625,1750.3096 L817,1750.3096 L817,1735.3096 L807,1725.3096 L625,1725.3096" fill="#FFFFFF" style="stroke:#000000;stroke-width:1;"/><path d="M807,1725.3096 L807,1735.3096 L817,1735.3096 L807,1725.3096" fill="#FFFFFF" style="stroke:#000000;stroke-width:1;"/><text fill="#000000" font-family="Verdana" font-size="13" lengthAdjust="spacing" textLength="171.3994" x="631" y="1743.3794">Start LLM latency tracking</text><g class="message" data-participant-1="VA" data-participant-2="VA"><line style="stroke:#000000;stroke-width:1;" x1="620.7886" x2="662.7886" y1="1777.9082" y2="1777.9082"/><line style="stroke:#000000;stroke-width:1;" x1="662.7886" x2="662.7886" y1="1777.9082" y2="1790.9082"/><line style="stroke:#000000;stroke-width:1;" x1="621.7886" x2="662.7886" y1="1790.9082" y2="1790.9082"/><polygon fill="#000000" points="631.7886,1786.9082,621.7886,1790.9082,631.7886,1794.9082,627.7886,1790.9082" style="stroke:#000000;stroke-width:1;"/><text fill="#000000" font-family="Verdana" font-size="13" lengthAdjust="spacing" textLength="142.5747" x="627.7886" y="1773.1787">llmStartTime = now()</text></g><g class="message" data-participant-1="MS" data-participant-2="AI"><polygon fill="#000000" points="1308.7446,1835.5068,1318.7446,1839.5068,1308.7446,1843.5068,1312.7446,1839.5068" style="stroke:#000000;stroke-width:1;"/><line style="stroke:#000000;stroke-width:1;" x1="1072.2026" x2="1314.7446" y1="1839.5068" y2="1839.5068"/><text fill="#000000" font-family="Verdana" font-size="13" lengthAdjust="spacing" textLength="151.7407" x="1079.2026" y="1818.978">Send message with full</text><text fill="#000000" font-family="Verdana" font-size="13" lengthAdjust="spacing" textLength="136.4048" x="1079.2026" y="1834.7773">conversation context</text></g><path d="M1325,1803.9082 L1325,1844.9082 L1562,1844.9082 L1562,1813.9082 L1552,1803.9082 L1325,1803.9082" fill="#FFFFFF" style="stroke:#000000;stroke-width:1;"/><path d="M1552,1803.9082 L1552,1813.9082 L1562,1813.9082 L1552,1803.9082" fill="#FFFFFF" style="stroke:#000000;stroke-width:1;"/><text fill="#000000" font-family="Verdana" font-size="13" lengthAdjust="spacing" textLength="150.2236" x="1331" y="1821.978">Same flow as text chat</text><text fill="#000000" font-family="Verdana" font-size="13" lengthAdjust="spacing" textLength="216.7915" x="1331" y="1837.7773">See Message Processing diagram</text><g class="message" data-participant-1="AI" data-participant-2="MS"><polygon fill="#000000" points="1083.2026,1947.3027,1073.2026,1951.3027,1083.2026,1955.3027,1079.2026,1951.3027" style="stroke:#000000;stroke-width:1;"/><line style="stroke:#000000;stroke-width:1;stroke-dasharray:2,2;" x1="1077.2026" x2="1319.7446" y1="1951.3027" y2="1951.3027"/><text fill="#000000" font-family="Verdana" font-size="13" lengthAdjust="spacing" textLength="62.2896" x="1089.2026" y="1867.5767">Response</text><text fill="#000000" font-family="Verdana" font-size="13" lengthAdjust="spacing" textLength="8.252" x="1089.2026" y="1883.376">{</text><text fill="#000000" font-family="Verdana" font-size="13" lengthAdjust="spacing" textLength="197.3105" x="1098.3433" y="1899.1753">content: "I'd be happy to help</text><text fill="#000000" font-family="Verdana" font-size="13" lengthAdjust="spacing" textLength="174.2686" x="1139.4761" y="1914.9746">you check order status...",</text><text fill="#000000" font-family="Verdana" font-size="13" lengthAdjust="spacing" textLength="91.73" x="1098.3433" y="1930.7739">toolCalls: [...]</text><text fill="#000000" font-family="Verdana" font-size="13" lengthAdjust="spacing" textLength="8.252" x="1089.2026" y="1946.5732">}</text></g><g class="message" data-participant-1="VA" data-participant-2="VA"><line style="stroke:#000000;stroke-width:1;" x1="620.7886" x2="662.7886" y1="1981.1021" y2="1981.1021"/><line style="stroke:#000000;stroke-width:1;" x1="662.7886" x2="662.7886" y1="1981.1021" y2="1994.1021"/><line style="stroke:#000000;stroke-width:1;" x1="621.7886" x2="662.7886" y1="1994.1021" y2="1994.1021"/><polygon fill="#000000" points="631.7886,1990.1021,621.7886,1994.1021,631.7886,1998.1021,627.7886,1994.1021" style="stroke:#000000;stroke-width:1;"/><text fill="#000000" font-family="Verdana" font-size="13" lengthAdjust="spacing" textLength="245.7305" x="627.7886" y="1976.3726">llmLatencyMs = now() - llmStartTime</text></g><rect fill="#FFFFFF" height="3" style="stroke:#FFFFFF;stroke-width:1;" width="2045.8535" x="5" y="2023.0017"/><line style="stroke:#000000;stroke-width:0.5;" x1="5" x2="2050.8535" y1="2023.0017" y2="2023.0017"/><line style="stroke:#000000;stroke-width:0.5;" x1="5" x2="2050.8535" y1="2026.0017" y2="2026.0017"/><rect fill="#FFFFFF" height="23.7993" style="stroke:#000000;stroke-width:1;" width="175.916" x="939.9688" y="2012.1021"/><text fill="#000000" font-family="Verdana" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="157.4727" x="945.9688" y="2029.1719">Text-to-Speech (TTS)</text><path d="M625,2050.9014 L625,2075.9014 L816,2075.9014 L816,2060.9014 L806,2050.9014 L625,2050.9014" fill="#FFFFFF" style="stroke:#000000;stroke-width:1;"/><path d="M806,2050.9014 L806,2060.9014 L816,2060.9014 L806,2050.9014" fill="#FFFFFF" style="stroke:#000000;stroke-width:1;"/><text fill="#000000" font-family="Verdana" font-size="13" lengthAdjust="spacing" textLength="170.8789" x="631" y="2068.9712">Start TTS latency tracking</text><g class="message" data-participant-1="VA" data-participant-2="VA"><line style="stroke:#000000;stroke-width:1;" x1="620.7886" x2="662.7886" y1="2103.5" y2="2103.5"/><line style="stroke:#000000;stroke-width:1;" x1="662.7886" x2="662.7886" y1="2103.5" y2="2116.5"/><line style="stroke:#000000;stroke-width:1;" x1="621.7886" x2="662.7886" y1="2116.5" y2="2116.5"/><polygon fill="#000000" points="631.7886,2112.5,621.7886,2116.5,631.7886,2120.5,627.7886,2116.5" style="stroke:#000000;stroke-width:1;"/><text fill="#000000" font-family="Verdana" font-size="13" lengthAdjust="spacing" textLength="139.8135" x="627.7886" y="2098.7705">ttsStartTime = now()</text></g><g class="message" data-participant-1="VA" data-participant-2="TTS"><polygon fill="#000000" points="1433.6719,2205.4966,1443.6719,2209.4966,1433.6719,2213.4966,1437.6719,2209.4966" style="stroke:#000000;stroke-width:1;"/><line style="stroke:#000000;stroke-width:1;" x1="620.7886" x2="1439.6719" y1="2209.4966" y2="2209.4966"/><text fill="#000000" font-family="Verdana" font-size="13" lengthAdjust="spacing" textLength="74.604" x="627.7886" y="2141.5698">synthesize(</text><text fill="#000000" font-family="Verdana" font-size="13" lengthAdjust="spacing" textLength="118.6123" x="636.9292" y="2157.3691">text: AI response,</text><text fill="#000000" font-family="Verdana" font-size="13" lengthAdjust="spacing" textLength="91.3301" x="636.9292" y="2173.1685">voice: "alloy",</text><text fill="#000000" font-family="Verdana" font-size="13" lengthAdjust="spacing" textLength="94.999" x="636.9292" y="2188.9678">format: "mp3"</text><text fill="#000000" font-family="Verdana" font-size="13" lengthAdjust="spacing" textLength="5.9033" x="627.7886" y="2204.7671">)</text></g><g class="message" data-participant-1="TTS" data-participant-2="TTS"><line style="stroke:#000000;stroke-width:1;" x1="1445.6719" x2="1487.6719" y1="2270.8945" y2="2270.8945"/><line style="stroke:#000000;stroke-width:1;" x1="1487.6719" x2="1487.6719" y1="2270.8945" y2="2283.8945"/><line style="stroke:#000000;stroke-width:1;" x1="1446.6719" x2="1487.6719" y1="2283.8945" y2="2283.8945"/><polygon fill="#000000" points="1456.6719,2279.8945,1446.6719,2283.8945,1456.6719,2287.8945,1452.6719,2283.8945" style="stroke:#000000;stroke-width:1;"/><text fill="#000000" font-family="Verdana" font-size="13" lengthAdjust="spacing" textLength="136.8555" x="1452.6719" y="2234.5664">Mock TTS processing</text><text fill="#000000" font-family="Verdana" font-size="13" lengthAdjust="spacing" textLength="168.5557" x="1452.6719" y="2250.3657">(simulates realistic delay:</text><text fill="#000000" font-family="Verdana" font-size="13" lengthAdjust="spacing" textLength="161.4336" x="1452.6719" y="2266.165">50-200ms per sentence)</text></g><g class="message" data-participant-1="TTS" data-participant-2="TTS"><line style="stroke:#000000;stroke-width:1;" x1="1445.6719" x2="1487.6719" y1="2345.2925" y2="2345.2925"/><line style="stroke:#000000;stroke-width:1;" x1="1487.6719" x2="1487.6719" y1="2345.2925" y2="2358.2925"/><line style="stroke:#000000;stroke-width:1;" x1="1446.6719" x2="1487.6719" y1="2358.2925" y2="2358.2925"/><polygon fill="#000000" points="1456.6719,2354.2925,1446.6719,2358.2925,1456.6719,2362.2925,1452.6719,2358.2925" style="stroke:#000000;stroke-width:1;"/><text fill="#000000" font-family="Verdana" font-size="13" lengthAdjust="spacing" textLength="100.1787" x="1452.6719" y="2308.9644">Generate audio</text><text fill="#000000" font-family="Verdana" font-size="13" lengthAdjust="spacing" textLength="123.7349" x="1452.6719" y="2324.7637">(canned audio files</text><text fill="#000000" font-family="Verdana" font-size="13" lengthAdjust="spacing" textLength="131.7773" x="1452.6719" y="2340.563">or simple synthesis)</text></g><g class="message" data-participant-1="TTS" data-participant-2="FS"><polygon fill="#000000" points="1787.4897,2399.8911,1797.4897,2403.8911,1787.4897,2407.8911,1791.4897,2403.8911" style="stroke:#000000;stroke-width:1;"/><line style="stroke:#000000;stroke-width:1;" x1="1445.6719" x2="1793.4897" y1="2403.8911" y2="2403.8911"/><text fill="#000000" font-family="Verdana" font-size="13" lengthAdjust="spacing" textLength="104.8315" x="1452.6719" y="2383.3623">Store TTS audio</text><text fill="#000000" font-family="Verdana" font-size="13" lengthAdjust="spacing" textLength="329.8179" x="1452.6719" y="2399.1616">/uploads/audio/ASSISTANT_OUTPUT_xyz456.mp3</text></g><g class="message" data-participant-1="FS" data-participant-2="TTS"><polygon fill="#000000" points="1456.6719,2429.6904,1446.6719,2433.6904,1456.6719,2437.6904,1452.6719,2433.6904" style="stroke:#000000;stroke-width:1;"/><line style="stroke:#000000;stroke-width:1;stroke-dasharray:2,2;" x1="1450.6719" x2="1798.4897" y1="2433.6904" y2="2433.6904"/><text fill="#000000" font-family="Verdana" font-size="13" lengthAdjust="spacing" textLength="56.1768" x="1462.6719" y="2428.9609">File path</text></g><g class="message" data-participant-1="TTS" data-participant-2="VA"><polygon fill="#000000" points="631.7886,2554.2856,621.7886,2558.2856,631.7886,2562.2856,627.7886,2558.2856" style="stroke:#000000;stroke-width:1;"/><line style="stroke:#000000;stroke-width:1;stroke-dasharray:2,2;" x1="625.7886" x2="1444.6719" y1="2558.2856" y2="2558.2856"/><text fill="#000000" font-family="Verdana" font-size="13" lengthAdjust="spacing" textLength="66.46" x="637.7886" y="2458.7603">TTS result</text><text fill="#000000" font-family="Verdana" font-size="13" lengthAdjust="spacing" textLength="8.252" x="637.7886" y="2474.5596">{</text><text fill="#000000" font-family="Verdana" font-size="13" lengthAdjust="spacing" textLength="209.6758" x="646.9292" y="2490.3589">audioPath: "/uploads/audio/...",</text><text fill="#000000" font-family="Verdana" font-size="13" lengthAdjust="spacing" textLength="120.4785" x="646.9292" y="2506.1582">durationMs: 3200,</text><text fill="#000000" font-family="Verdana" font-size="13" lengthAdjust="spacing" textLength="99.728" x="646.9292" y="2521.9575">format: "mp3",</text><text fill="#000000" font-family="Verdana" font-size="13" lengthAdjust="spacing" textLength="128.1465" x="646.9292" y="2537.7568">sampleRate: 24000</text><text fill="#000000" font-family="Verdana" font-size="13" lengthAdjust="spacing" textLength="8.252" x="637.7886" y="2553.5562">}</text></g><g class="message" data-participant-1="VA" data-participant-2="VA"><line style="stroke:#000000;stroke-width:1;" x1="620.7886" x2="662.7886" y1="2588.085" y2="2588.085"/><line style="stroke:#000000;stroke-width:1;" x1="662.7886" x2="662.7886" y1="2588.085" y2="2601.085"/><line style="stroke:#000000;stroke-width:1;" x1="621.7886" x2="662.7886" y1="2601.085" y2="2601.085"/><polygon fill="#000000" points="631.7886,2597.085,621.7886,2601.085,631.7886,2605.085,627.7886,2601.085" style="stroke:#000000;stroke-width:1;"/><text fill="#000000" font-family="Verdana" font-size="13" lengthAdjust="spacing" textLength="240.208" x="627.7886" y="2583.3555">ttsLatencyMs = now() - ttsStartTime</text></g><g class="message" data-participant-1="VA" data-participant-2="DB"><polygon fill="#000000" points="1886.085,2690.0815,1896.085,2694.0815,1886.085,2698.0815,1890.085,2694.0815" style="stroke:#000000;stroke-width:1;"/><line style="stroke:#000000;stroke-width:1;" x1="620.7886" x2="1892.085" y1="2694.0815" y2="2694.0815"/><text fill="#000000" font-family="Verdana" font-size="13" lengthAdjust="spacing" textLength="150.8711" x="627.7886" y="2626.1548">INSERT audio_artifacts</text><text fill="#000000" font-family="Verdana" font-size="13" lengthAdjust="spacing" textLength="257.4229" x="627.7886" y="2641.9541">(sessionId, type: ASSISTANT_OUTPUT,</text><text fill="#000000" font-family="Verdana" font-size="13" lengthAdjust="spacing" textLength="187.5732" x="627.7886" y="2657.7534">filePath, durationMs, format,</text><text fill="#000000" font-family="Verdana" font-size="13" lengthAdjust="spacing" textLength="141.6099" x="627.7886" y="2673.5527">provider: "mock_tts",</text><text fill="#000000" font-family="Verdana" font-size="13" lengthAdjust="spacing" textLength="70.5669" x="627.7886" y="2689.3521">latencyMs)</text></g><g class="message" data-participant-1="DB" data-participant-2="VA"><polygon fill="#000000" points="631.7886,2719.8809,621.7886,2723.8809,631.7886,2727.8809,627.7886,2723.8809" style="stroke:#000000;stroke-width:1;"/><line style="stroke:#000000;stroke-width:1;stroke-dasharray:2,2;" x1="625.7886" x2="1897.085" y1="2723.8809" y2="2723.8809"/><text fill="#000000" font-family="Verdana" font-size="13" lengthAdjust="spacing" textLength="170.5361" x="637.7886" y="2719.1514">artifactId = audio_xyz456</text></g><rect fill="#FFFFFF" height="3" style="stroke:#FFFFFF;stroke-width:1;" width="2045.8535" x="5" y="2752.7805"/><line style="stroke:#000000;stroke-width:0.5;" x1="5" x2="2050.8535" y1="2752.7805" y2="2752.7805"/><line style="stroke:#000000;stroke-width:0.5;" x1="5" x2="2050.8535" y1="2755.7805" y2="2755.7805"/><rect fill="#FFFFFF" height="23.7993" style="stroke:#000000;stroke-width:1;" width="205.3184" x="925.2676" y="2741.8809"/><text fill="#000000" font-family="Verdana" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="186.875" x="931.2676" y="2758.9507">Create Assistant Message</text><g class="message" data-participant-1="VA" data-participant-2="DB"><polygon fill="#000000" points="1886.085,2793.4795,1896.085,2797.4795,1886.085,2801.4795,1890.085,2797.4795" style="stroke:#000000;stroke-width:1;"/><line style="stroke:#000000;stroke-width:1;" x1="620.7886" x2="1892.085" y1="2797.4795" y2="2797.4795"/><text fill="#000000" font-family="Verdana" font-size="13" lengthAdjust="spacing" textLength="177.2646" x="627.7886" y="2792.75">Get next sequence number</text></g><g class="message" data-participant-1="DB" data-participant-2="VA"><polygon fill="#000000" points="631.7886,2823.2788,621.7886,2827.2788,631.7886,2831.2788,627.7886,2827.2788" style="stroke:#000000;stroke-width:1;"/><line style="stroke:#000000;stroke-width:1;stroke-dasharray:2,2;" x1="625.7886" x2="1897.085" y1="2827.2788" y2="2827.2788"/><text fill="#000000" font-family="Verdana" font-size="13" lengthAdjust="spacing" textLength="141.3623" x="637.7886" y="2822.5493">sequenceNumber = 6</text></g><g class="message" data-participant-1="VA" data-participant-2="DB"><polygon fill="#000000" points="1886.085,2900.4761,1896.085,2904.4761,1886.085,2908.4761,1890.085,2904.4761" style="stroke:#000000;stroke-width:1;"/><line style="stroke:#000000;stroke-width:1;" x1="620.7886" x2="1892.085" y1="2904.4761" y2="2904.4761"/><text fill="#000000" font-family="Verdana" font-size="13" lengthAdjust="spacing" textLength="118.2822" x="627.7886" y="2852.3486">INSERT messages</text><text fill="#000000" font-family="Verdana" font-size="13" lengthAdjust="spacing" textLength="192.1245" x="627.7886" y="2868.1479">(sessionId, role: ASSISTANT,</text><text fill="#000000" font-family="Verdana" font-size="13" lengthAdjust="spacing" textLength="159.6943" x="627.7886" y="2883.9473">content, audioArtifactId,</text><text fill="#000000" font-family="Verdana" font-size="13" lengthAdjust="spacing" textLength="220.3018" x="627.7886" y="2899.7466">sequenceNumber, providerCallId)</text></g><g class="message" data-participant-1="DB" data-participant-2="VA"><polygon fill="#000000" points="631.7886,2930.2754,621.7886,2934.2754,631.7886,2938.2754,627.7886,2934.2754" style="stroke:#000000;stroke-width:1;"/><line style="stroke:#000000;stroke-width:1;stroke-dasharray:2,2;" x1="625.7886" x2="1897.085" y1="2934.2754" y2="2934.2754"/><text fill="#000000" font-family="Verdana" font-size="13" lengthAdjust="spacing" textLength="213.3384" x="637.7886" y="2929.5459">Message stored (msg_asst_456)</text></g><rect fill="#FFFFFF" height="3" style="stroke:#FFFFFF;stroke-width:1;" width="2045.8535" x="5" y="2963.175"/><line style="stroke:#000000;stroke-width:0.5;" x1="5" x2="2050.8535" y1="2963.175" y2="2963.175"/><line style="stroke:#000000;stroke-width:0.5;" x1="5" x2="2050.8535" y1="2966.175" y2="2966.175"/><rect fill="#FFFFFF" height="23.7993" style="stroke:#000000;stroke-width:1;" width="142.7305" x="956.5615" y="2952.2754"/><text fill="#000000" font-family="Verdana" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="124.2871" x="962.5615" y="2969.3452">Return Response</text><g class="message" data-participant-1="VA" data-participant-2="VA"><line style="stroke:#000000;stroke-width:1;" x1="620.7886" x2="662.7886" y1="3023.6733" y2="3023.6733"/><line style="stroke:#000000;stroke-width:1;" x1="662.7886" x2="662.7886" y1="3023.6733" y2="3036.6733"/><line style="stroke:#000000;stroke-width:1;" x1="621.7886" x2="662.7886" y1="3036.6733" y2="3036.6733"/><polygon fill="#000000" points="631.7886,3032.6733,621.7886,3036.6733,631.7886,3040.6733,627.7886,3036.6733" style="stroke:#000000;stroke-width:1;"/><text fill="#000000" font-family="Verdana" font-size="13" lengthAdjust="spacing" textLength="145.2788" x="627.7886" y="3003.1445">Calculate total latency</text><text fill="#000000" font-family="Verdana" font-size="13" lengthAdjust="spacing" textLength="193.2671" x="627.7886" y="3018.9438">totalLatency = stt + llm + tts</text></g><g class="message" data-participant-1="VA" data-participant-2="BR"><polygon fill="#000000" points="233.4673,3331.061,223.4673,3335.061,233.4673,3339.061,229.4673,3335.061" style="stroke:#000000;stroke-width:1;"/><line style="stroke:#000000;stroke-width:1;stroke-dasharray:2,2;" x1="227.4673" x2="619.7886" y1="3335.061" y2="3335.061"/><text fill="#000000" font-family="Verdana" font-size="13" lengthAdjust="spacing" textLength="48.604" x="239.4673" y="3061.7432">200 OK</text><text fill="#000000" font-family="Verdana" font-size="13" lengthAdjust="spacing" textLength="8.252" x="239.4673" y="3077.5425">{</text><text fill="#000000" font-family="Verdana" font-size="13" lengthAdjust="spacing" textLength="190.29" x="248.6079" y="3093.3418">"artifactId": "audio_abc123",</text><text fill="#000000" font-family="Verdana" font-size="13" lengthAdjust="spacing" textLength="309.0674" x="248.6079" y="3109.1411">"transcript": "What is the status of my order?",</text><text fill="#000000" font-family="Verdana" font-size="13" lengthAdjust="spacing" textLength="132.4121" x="248.6079" y="3124.9404">"durationMs": 2500,</text><text fill="#000000" font-family="Verdana" font-size="13" lengthAdjust="spacing" textLength="88.2451" x="248.6079" y="3140.7397">"message": {</text><text fill="#000000" font-family="Verdana" font-size="13" lengthAdjust="spacing" textLength="146.0532" x="257.7485" y="3156.5391">"id": "msg_asst_456",</text><text fill="#000000" font-family="Verdana" font-size="13" lengthAdjust="spacing" textLength="139.4707" x="257.7485" y="3172.3384">"role": "ASSISTANT",</text><text fill="#000000" font-family="Verdana" font-size="13" lengthAdjust="spacing" textLength="234.127" x="257.7485" y="3188.1377">"content": "I'd be happy to help...",</text><text fill="#000000" font-family="Verdana" font-size="13" lengthAdjust="spacing" textLength="356.04" x="257.7485" y="3203.937">"audioUrl": "/api/v1/sessions/:id/voice/audio_xyz456"</text><text fill="#000000" font-family="Verdana" font-size="13" lengthAdjust="spacing" textLength="12.981" x="248.6079" y="3219.7363">},</text><text fill="#000000" font-family="Verdana" font-size="13" lengthAdjust="spacing" textLength="92.8154" x="248.6079" y="3235.5356">"metadata": {</text><text fill="#000000" font-family="Verdana" font-size="13" lengthAdjust="spacing" textLength="137.2808" x="257.7485" y="3251.335">"sttLatencyMs": 250,</text><text fill="#000000" font-family="Verdana" font-size="13" lengthAdjust="spacing" textLength="140.042" x="257.7485" y="3267.1343">"llmLatencyMs": 450,</text><text fill="#000000" font-family="Verdana" font-size="13" lengthAdjust="spacing" textLength="137.2808" x="257.7485" y="3282.9336">"ttsLatencyMs": 180,</text><text fill="#000000" font-family="Verdana" font-size="13" lengthAdjust="spacing" textLength="145.0439" x="257.7485" y="3298.7329">"totalLatencyMs": 880</text><text fill="#000000" font-family="Verdana" font-size="13" lengthAdjust="spacing" textLength="8.252" x="248.6079" y="3314.5322">}</text><text fill="#000000" font-family="Verdana" font-size="13" lengthAdjust="spacing" textLength="8.252" x="239.4673" y="3330.3315">}</text></g><g class="message" data-participant-1="BR" data-participant-2="BR"><line style="stroke:#000000;stroke-width:1;" x1="222.4673" x2="264.4673" y1="3364.8604" y2="3364.8604"/><line style="stroke:#000000;stroke-width:1;" x1="264.4673" x2="264.4673" y1="3364.8604" y2="3377.8604"/><line style="stroke:#000000;stroke-width:1;" x1="223.4673" x2="264.4673" y1="3377.8604" y2="3377.8604"/><polygon fill="#000000" points="233.4673,3373.8604,223.4673,3377.8604,233.4673,3381.8604,229.4673,3377.8604" style="stroke:#000000;stroke-width:1;"/><text fill="#000000" font-family="Verdana" font-size="13" lengthAdjust="spacing" textLength="99.0806" x="229.4673" y="3360.1309">Parse response</text></g><g class="message" data-participant-1="BR" data-participant-2="BR"><line style="stroke:#000000;stroke-width:1;" x1="222.4673" x2="264.4673" y1="3423.459" y2="3423.459"/><line style="stroke:#000000;stroke-width:1;" x1="264.4673" x2="264.4673" y1="3423.459" y2="3436.459"/><line style="stroke:#000000;stroke-width:1;" x1="223.4673" x2="264.4673" y1="3436.459" y2="3436.459"/><polygon fill="#000000" points="233.4673,3432.459,223.4673,3436.459,233.4673,3440.459,229.4673,3436.459" style="stroke:#000000;stroke-width:1;"/><text fill="#000000" font-family="Verdana" font-size="13" lengthAdjust="spacing" textLength="140.5688" x="229.4673" y="3402.9302">Create audio element</text><text fill="#000000" font-family="Verdana" font-size="13" lengthAdjust="spacing" textLength="157.3267" x="229.4673" y="3418.7295">&lt;audio src="audioUrl"&gt;</text></g><g class="message" data-participant-1="BR" data-participant-2="VA"><polygon fill="#000000" points="608.7886,3462.2583,618.7886,3466.2583,608.7886,3470.2583,612.7886,3466.2583" style="stroke:#000000;stroke-width:1;"/><line style="stroke:#000000;stroke-width:1;" x1="222.4673" x2="614.7886" y1="3466.2583" y2="3466.2583"/><text fill="#000000" font-family="Verdana" font-size="13" lengthAdjust="spacing" textLength="251.1196" x="229.4673" y="3461.5288">GET /sessions/:id/voice/audio_xyz456</text></g><g class="message" data-participant-1="VA" data-participant-2="DB"><polygon fill="#000000" points="1886.085,3523.6563,1896.085,3527.6563,1886.085,3531.6563,1890.085,3527.6563" style="stroke:#000000;stroke-width:1;"/><line style="stroke:#000000;stroke-width:1;" x1="620.7886" x2="1892.085" y1="3527.6563" y2="3527.6563"/><text fill="#000000" font-family="Verdana" font-size="13" lengthAdjust="spacing" textLength="206.2734" x="627.7886" y="3491.3281">SELECT * FROM audio_artifacts</text><text fill="#000000" font-family="Verdana" font-size="13" lengthAdjust="spacing" textLength="91.2095" x="627.7886" y="3507.1274">WHERE id = ?</text><text fill="#000000" font-family="Verdana" font-size="13" lengthAdjust="spacing" textLength="121.3862" x="627.7886" y="3522.9268">AND sessionId = ?</text></g><g class="message" data-participant-1="DB" data-participant-2="VA"><polygon fill="#000000" points="631.7886,3553.4556,621.7886,3557.4556,631.7886,3561.4556,627.7886,3557.4556" style="stroke:#000000;stroke-width:1;"/><line style="stroke:#000000;stroke-width:1;stroke-dasharray:2,2;" x1="625.7886" x2="1897.085" y1="3557.4556" y2="3557.4556"/><text fill="#000000" font-family="Verdana" font-size="13" lengthAdjust="spacing" textLength="154.2861" x="637.7886" y="3552.7261">Audio artifact metadata</text></g><g class="message" data-participant-1="VA" data-participant-2="FS"><polygon fill="#000000" points="1787.4897,3583.2549,1797.4897,3587.2549,1787.4897,3591.2549,1791.4897,3587.2549" style="stroke:#000000;stroke-width:1;"/><line style="stroke:#000000;stroke-width:1;" x1="620.7886" x2="1793.4897" y1="3587.2549" y2="3587.2549"/><text fill="#000000" font-family="Verdana" font-size="13" lengthAdjust="spacing" textLength="96.8716" x="627.7886" y="3582.5254">Read audio file</text></g><g class="message" data-participant-1="FS" data-participant-2="VA"><polygon fill="#000000" points="631.7886,3613.0542,621.7886,3617.0542,631.7886,3621.0542,627.7886,3617.0542" style="stroke:#000000;stroke-width:1;"/><line style="stroke:#000000;stroke-width:1;stroke-dasharray:2,2;" x1="625.7886" x2="1798.4897" y1="3617.0542" y2="3617.0542"/><text fill="#000000" font-family="Verdana" font-size="13" lengthAdjust="spacing" textLength="70.0781" x="637.7886" y="3612.3247">Audio data</text></g><g class="message" data-participant-1="VA" data-participant-2="BR"><polygon fill="#000000" points="233.4673,3674.4521,223.4673,3678.4521,233.4673,3682.4521,229.4673,3678.4521" style="stroke:#000000;stroke-width:1;"/><line style="stroke:#000000;stroke-width:1;stroke-dasharray:2,2;" x1="227.4673" x2="619.7886" y1="3678.4521" y2="3678.4521"/><text fill="#000000" font-family="Verdana" font-size="13" lengthAdjust="spacing" textLength="48.604" x="239.4673" y="3642.124">200 OK</text><text fill="#000000" font-family="Verdana" font-size="13" lengthAdjust="spacing" textLength="169.8379" x="239.4673" y="3657.9233">Content-Type: audio/mp3</text><text fill="#000000" font-family="Verdana" font-size="13" lengthAdjust="spacing" textLength="92.9106" x="239.4673" y="3673.7227">[audio binary]</text></g><g class="message" data-participant-1="BR" data-participant-2="BR"><line style="stroke:#000000;stroke-width:1;" x1="222.4673" x2="264.4673" y1="3724.0508" y2="3724.0508"/><line style="stroke:#000000;stroke-width:1;" x1="264.4673" x2="264.4673" y1="3724.0508" y2="3737.0508"/><line style="stroke:#000000;stroke-width:1;" x1="223.4673" x2="264.4673" y1="3737.0508" y2="3737.0508"/><polygon fill="#000000" points="233.4673,3733.0508,223.4673,3737.0508,233.4673,3741.0508,229.4673,3737.0508" style="stroke:#000000;stroke-width:1;"/><text fill="#000000" font-family="Verdana" font-size="13" lengthAdjust="spacing" textLength="122.9795" x="229.4673" y="3703.522">Play audio through</text><text fill="#000000" font-family="Verdana" font-size="13" lengthAdjust="spacing" textLength="136.1509" x="229.4673" y="3719.3213">speaker/headphones</text></g><g class="message" data-participant-1="BR" data-participant-2="User"><polygon fill="#000000" points="39.9277,3794.4487,29.9277,3798.4487,39.9277,3802.4487,35.9277,3798.4487" style="stroke:#000000;stroke-width:1;"/><line style="stroke:#000000;stroke-width:1;stroke-dasharray:2,2;" x1="33.9277" x2="221.4673" y1="3798.4487" y2="3798.4487"/><text fill="#000000" font-family="Verdana" font-size="13" lengthAdjust="spacing" textLength="152.5469" x="45.9277" y="3762.1206">User hears AI response</text><text fill="#000000" font-family="Verdana" font-size="13" lengthAdjust="spacing" textLength="137.7314" x="45.9277" y="3777.9199">"I'd be happy to help</text><text fill="#000000" font-family="Verdana" font-size="13" lengthAdjust="spacing" textLength="169.5396" x="45.9277" y="3793.7192">you check order status..."</text></g><path d="M1750,3811.4487 L1750,3915.4487 L2045,3915.4487 L2045,3821.4487 L2035,3811.4487 L1750,3811.4487" fill="#FFFFFF" style="stroke:#000000;stroke-width:1;"/><path d="M2035,3811.4487 L2035,3821.4487 L2045,3821.4487 L2035,3811.4487" fill="#FFFFFF" style="stroke:#000000;stroke-width:1;"/><text fill="#000000" font-family="Verdana" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="190.8042" x="1756" y="3829.5186">Database Tables Updated:</text><text fill="#000000" font-family="Verdana" font-size="13" lengthAdjust="spacing" textLength="252.5986" x="1756" y="3845.3179">&#8226; messages (2 rows: user + assistant)</text><text fill="#000000" font-family="Verdana" font-size="13" lengthAdjust="spacing" textLength="274.8535" x="1756" y="3861.1172">&#8226; audio_artifacts (2 rows: input + output)</text><text fill="#000000" font-family="Verdana" font-size="13" lengthAdjust="spacing" textLength="218.0801" x="1756" y="3876.9165">&#8226; provider_calls (1 row: LLM call)</text><text fill="#000000" font-family="Verdana" font-size="13" lengthAdjust="spacing" textLength="204.3374" x="1756" y="3892.7158">&#8226; usage_events (1 row: billing)</text><text fill="#000000" font-family="Verdana" font-size="13" lengthAdjust="spacing" textLength="209.8979" x="1756" y="3908.5151">&#8226; tool_executions (if tools used)</text><path d="M457,3926.2446 L457,4125.2446 L784,4125.2446 L784,3936.2446 L774,3926.2446 L457,3926.2446" fill="#FFFFFF" style="stroke:#000000;stroke-width:1;"/><path d="M774,3926.2446 L774,3936.2446 L784,3936.2446 L774,3926.2446" fill="#FFFFFF" style="stroke:#000000;stroke-width:1;"/><text fill="#000000" font-family="Verdana" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="113.0137" x="463" y="3944.3145">Voice Features:</text><text fill="#000000" font-family="Verdana" font-size="13" lengthAdjust="spacing" textLength="251.4063" x="463" y="3960.1138">&#9989; Both input and output audio stored</text><text fill="#000000" font-family="Verdana" font-size="13" lengthAdjust="spacing" textLength="266.4185" x="463" y="3975.9131">&#9989; Full transcript preserved in messages</text><text fill="#000000" font-family="Verdana" font-size="13" lengthAdjust="spacing" textLength="223.3496" x="463" y="3991.7124">&#9989; Latency tracked for each stage</text><text fill="#000000" font-family="Verdana" font-size="13" lengthAdjust="spacing" textLength="183.8228" x="463" y="4007.5117">&#9989; Same billing as text chat</text><text fill="#000000" font-family="Verdana" font-size="13" lengthAdjust="spacing" textLength="244.0747" x="463" y="4023.311">&#9989; Voice artifacts linked to messages</text><text fill="#000000" font-family="Verdana" font-size="13" lengthAdjust="spacing" textLength="306.2437" x="463" y="4039.1104">&#9989; Idempotency prevents duplicate processing</text><text fill="#000000" font-family="Verdana" font-size="13" lengthAdjust="spacing" textLength="4.5703" x="463" y="4054.9097">&#160;</text><text fill="#000000" font-family="Verdana" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="155.9048" x="463" y="4070.709">Mocked Components:</text><text fill="#000000" font-family="Verdana" font-size="13" lengthAdjust="spacing" textLength="223.1011" x="463" y="4086.5083">&#8226; STT: Returns canned transcripts</text><text fill="#000000" font-family="Verdana" font-size="13" lengthAdjust="spacing" textLength="227.1953" x="463" y="4102.3076">&#8226; TTS: Returns pre-recorded audio</text><text fill="#000000" font-family="Verdana" font-size="13" lengthAdjust="spacing" textLength="218.772" x="463" y="4118.1069">&#8226; Both simulate realistic latencies</text><!--SRC=[dLZRRYF74NsVhwWm3w4KKfIqAsTDH5vG5su8YvB2eUG0ve9ephJ4WOOza-aUQMd3G5xo5tdAf-LBSgfxRgIejHClO8XTrNMlKzNpExEKAqbfB2BbwQT8fI8JArg8uEanIt8LdYTnaj7lXvVyp_DCP699zqaKIBhDaa1g7Qb7kerI6KTAKXUqGCHdMHG-Ihf9jUU9m432dPQP1-4c2g9KA4EjionvmU5CjISIF7ij4fhE9fjCJjFWTcIfzuDDgZ-TaY-pP_10p3W9dcJev82ooJg6fG8c5UoMQUnlyWn6xDDp5ChCqWUZJVfqwh-X3XGl54OiX9RK6aQ8aG-leT2IXqtgRQBDOoRzlrvPsiMPvvsU5Y4TgJGtVHiiybCfdZITddgU_Ttz3j7fksEAb4be5GLPaYuJ1NDQFoo5eKWJ4ahQ29FhcKeUQBMc98D37rkUTpOfXOnb68c932o9mpjJWKXDdabD8W-ZX89bhfuWelqY5wjUakQQ7f9i9SnUKmwSJ2cpSb06u3u-E26DtohK1ErMriQDyqmA8-aiJXOpzP0bgmrzDXHtQPo8a0RsdDrtj-y7VRgzyQVKqrnrYTAzVXJsdZbmlTpUcQc_TKUXNAM9aIfOTx-NwpvPXdckeh_dSlwd3z_Er7cYG3VTwJgLVLhbiOaupprsiCk9cYbhL9z-N4HAPEl2nWVazRFdAKYdB7fS6g-XZD9CFaEgza8O4mNiPLfrY8TWQ85Eiv8ygK9YCPvtFoXzknTn5FAjGfcDTf603hs8vmwjqdTxvPMXRyEVoOPnCrK4GlViOU_ElvpCHzUtTzEvM0H7n-yEM9hd3Ntg5cfjiQR2B4l15sTz6btZujH9ddCBFA13kHgAq8_23XaRlLf31_c4h5k8wb2OPyA0SQmxTTrSd5LQIvcZa4vBDTR0PdYvWfZPDs2dMBWucmpWn26jGwUPOHeXlAS8wqjxpzOHEaK6owv9kbFvnL0RcB1dwybTnCy-2rCwoAA5R5ihXeK7aC3WKiGP01Ksmbo6pqfmPSfLKrsnvmmF_5UZ23X-4SeDZcXq3VAj0IuKobYi-pDrT7ZOVNTukD9xcv8-IIKpBepIsDGKhHC8fMG8KJf5EqZk-8oW8dKfDJ9JXD07ImwNarb4R5g9ujleW9dwUQQeeQ9FEo65DlxR09WEKz7w3m1G5Q0s3W- -FR67iL2FES3mF0bnt9AgU-UtPkeNRoE7vifbUApBD6ASLAbjbkVTxSLWUlcwFFtBQSC3IFa8zMa1wVZPMY4fSsXYM-E6je-sO0fiicXRpekwNiOeXC1o5BH6CynKbiH5D-17u02ctp2cKs3Ae2fyP7dibnvzaeOKLwcMW2b4ZrI-Mc1a5Zt3oalIjQN0wfEcXA9bLywshLxTPLs7jWm2QLD5tRAileo8Pj09gRtIZ_CSePgZQrt3kVbPxWHjjAqAHHRIC4vUNEUzrTjNL-ElzNSSh_pNBUvy7umWXF6qy9nU8hEaXpoEhQVFCjCMYSYw_SKqZS1DnkG7sCUZcCaOH8owlfILmmsVC3KViHzv7bmjup8fkg_ee2hthT4VGbf8MeeqXLS9BMMSRZJGEicXJW8dt1nsFNPmSE1QoIH9V2xYM6CEuV3pLiCWABiQfXahcnK6FmP11uVKngxozMJmclELP1YZToJ3qN4LTRfMG0mT_IJRrWtextDjb31bdRDJ6K62VydQ-Ulc1Cumve0E4CgMb58jdlB1RyRJayFkCSCffHnRoMa9v9RK2bjjBq1W0Qars6-0QkcQhiNKSvWF2Z5ROtZW-oD_EhYUpc_kfZoClwn_Ud_opG4ShMQnDQSnZAtu4gtnzmPCMx4yfn2jBLrL-TGZk4_l48ZNCROds4hWsGGnwDFn-yF3mwqoGxftbLcp2lw_pM4xAB-oFpIGl5y0EMpO0F9VNJ5Ss9jOFu1HQ3jizwy1_xVWifrSsxZypOw0V0sNgqZyB-3SeJ8SZ15sd3HisWNMGcipX_yEh2SIwxwgqAlXDz-7pC0s5b38YBZ4WvcoFuk2WAkOfVH7nXpy7-bm8efL7pL7DzyN5Tkgqz7Yjc-iVAuEM_MiREtSFNOi6wswJ73d-AGeybOHR9pzx02t5LcjpIWu2I1n3fXOPQ6Y5BbelO7bLQTHuSzT5ZDlJwHHx_berpEbMOOjllfBQR0Hl48sB6xkGywvKbSJ-45vNrEQlGhAqOUQqaYRfNtuS6ZrsswldsUt8aCjb4Yzu-7cW576SeN8pDIVtM-T1QTr3BvhFja-NUv-iMrsPDql_kNLvVcKzcaukHc_nf4V_d8vkQI8U_hZJ0skBwXg9xV7DPh0hURbPIg3t7n1lR7PrxVh2rjLlVc8TDWBK9sf7vquztByl15SpAL2cLbcIVwuH5FpSrvclIKCiKzvxMxW2k-XnRS0K3FTdA5uyEzUBzxUAOg1ds0ZueyE-_iNvIU9gLXWpk7TpS_FiB-_x_td7_-k48lQnyIVQlh4snxwN9IOkMVvjb9KiqVyCGFyIMxmXsCkCMiUy693xIFcxTlzZqySKyvwv-urNR4ieZZ6p7SSl1hDvHSPvDpzO8eUx9bc6m65zVkwzlb-09_TPvOXIfc_TLXN__LFEakmCZfpiR8M1XUPSWXgsOPOAfll2xpu4P5du6kagd1Ppglc-WGwHXX9WUqBSNkKbiLkdeLJ6ykdfJexww22Y-NmHv-cdbtV7sZdzmVuxZvOqNc2AuevoqpRLwQR1xfyKzPkQijZrvEI1wgwxgjFkIfP7Xl6SYDhB6HkU4ImkShBVm40]--></g></svg>