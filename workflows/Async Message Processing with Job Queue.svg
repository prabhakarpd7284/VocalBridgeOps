<svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" contentStyleType="text/css" data-diagram-type="SEQUENCE" height="4245px" preserveAspectRatio="none" style="width:1729px;height:4245px;background:#FEFEFE;" version="1.1" viewBox="0 0 1729 4245" width="1729px" zoomAndPan="magnify"><title>Async Mode - Job Queue Pattern</title><defs/><g><rect fill="#FEFEFE" height="4245" style="stroke:none;stroke-width:1;" width="1729" x="0" y="0"/><text fill="#000000" font-family="Verdana" font-size="22" font-weight="bold" lengthAdjust="spacing" textLength="401.2207" x="662.5105" y="37.1182">Async Mode - Job Queue Pattern</text><rect fill="#FFFFFF" height="476.7529" style="stroke:#000000;stroke-width:1;" width="578.0464" x="899.5713" y="1396.9116"/><rect fill="#FFFFFF" height="205.5625" style="stroke:none;stroke-width:1;" width="578.0464" x="899.5713" y="1668.1021"/><rect fill="#FFFFFF" height="796.7134" style="stroke:#000000;stroke-width:1;" width="832.6704" x="879.5713" y="1992.8618"/><rect fill="#FFFFFF" height="531.5229" style="stroke:#000000;stroke-width:1;" width="812.6704" x="889.5713" y="2251.0522"/><rect fill="#FFFFFF" height="438.3257" style="stroke:none;stroke-width:1;" width="812.6704" x="889.5713" y="2344.2495"/><rect fill="#FFFFFF" height="221.5625" style="stroke:#000000;stroke-width:1;" width="792.6704" x="899.5713" y="2554.0127"/><rect fill="#FFFFFF" height="128.3652" style="stroke:none;stroke-width:1;" width="792.6704" x="899.5713" y="2647.21"/><rect fill="#FFFFFF" height="389.355" style="stroke:#000000;stroke-width:1;" width="877.7412" x="129" y="2938.5718"/><rect fill="#FFFFFF" height="74.9673" style="stroke:none;stroke-width:1;" width="877.7412" x="129" y="3252.9595"/><g><title>Client</title><rect fill="#000000" fill-opacity="0.00000" height="4032.542" width="8" x="158.0874" y="130.752"/><line style="stroke:#000000;stroke-width:1;stroke-dasharray:5,5;" x1="162" x2="162" y1="130.752" y2="4163.2939"/></g><g><title>API Gateway</title><rect fill="#000000" fill-opacity="0.00000" height="4032.542" width="8" x="464.2534" y="130.752"/><line style="stroke:#000000;stroke-width:1;stroke-dasharray:5,5;" x1="468.2046" x2="468.2046" y1="130.752" y2="4163.2939"/></g><g><title>Job Service</title><rect fill="#000000" fill-opacity="0.00000" height="4032.542" width="8" x="729.0327" y="130.752"/><line style="stroke:#000000;stroke-width:1;stroke-dasharray:5,5;" x1="732.957" x2="732.957" y1="130.752" y2="4163.2939"/></g><g><title>PostgreSQL</title><rect fill="#000000" fill-opacity="0.00000" height="4032.542" width="8" x="949.1563" y="130.752"/><line style="stroke:#000000;stroke-width:1;stroke-dasharray:5,5;" x1="952.5713" x2="952.5713" y1="130.752" y2="4163.2939"/></g><g><title>Background</title><rect fill="#000000" fill-opacity="0.00000" height="4032.542" width="8" x="1166.8232" y="130.752"/><line style="stroke:#000000;stroke-width:1;stroke-dasharray:5,5;" x1="1170.2129" x2="1170.2129" y1="130.752" y2="4163.2939"/></g><g><title>Message Service</title><rect fill="#000000" fill-opacity="0.00000" height="4032.542" width="8" x="1388.2354" y="130.752"/><line style="stroke:#000000;stroke-width:1;stroke-dasharray:5,5;" x1="1391.853" x2="1391.853" y1="130.752" y2="4163.2939"/></g><g><title>Webhook</title><rect fill="#000000" fill-opacity="0.00000" height="4032.542" width="8" x="1628.7197" y="130.752"/><line style="stroke:#000000;stroke-width:1;stroke-dasharray:5,5;" x1="1632.1978" x2="1632.1978" y1="130.752" y2="4163.2939"/></g><g class="participant participant-head" data-participant="Client"><text fill="#000000" font-family="Verdana" font-size="14" lengthAdjust="spacing" textLength="40.1748" x="139" y="127.8125">Client</text><ellipse cx="162.0874" cy="61.7373" fill="#FFFFFF" rx="8" ry="8" style="stroke:#000000;stroke-width:1;"/><path d="M162.0874,69.7373 L162.0874,96.7373 M149.0874,77.7373 L175.0874,77.7373 M162.0874,96.7373 L149.0874,111.7373 M162.0874,96.7373 L175.0874,111.7373" fill="none" style="stroke:#000000;stroke-width:1;"/></g><g class="participant participant-tail" data-participant="Client"><text fill="#000000" font-family="Verdana" font-size="14" lengthAdjust="spacing" textLength="40.1748" x="139" y="4176.3691">Client</text><ellipse cx="162.0874" cy="4188.3086" fill="#FFFFFF" rx="8" ry="8" style="stroke:#000000;stroke-width:1;"/><path d="M162.0874,4196.3086 L162.0874,4223.3086 M149.0874,4204.3086 L175.0874,4204.3086 M162.0874,4223.3086 L149.0874,4238.3086 M162.0874,4223.3086 L175.0874,4238.3086" fill="none" style="stroke:#000000;stroke-width:1;"/></g><g class="participant participant-head" data-participant="API"><rect fill="#FFFFFF" height="31.0146" rx="2.5" ry="2.5" style="stroke:#000000;stroke-width:1;" width="104.0977" x="416.2046" y="98.7373"/><text fill="#000000" font-family="Verdana" font-size="14" lengthAdjust="spacing" textLength="90.0977" x="423.2046" y="119.8125">API Gateway</text></g><g class="participant participant-tail" data-participant="API"><rect fill="#FFFFFF" height="31.0146" rx="2.5" ry="2.5" style="stroke:#000000;stroke-width:1;" width="104.0977" x="416.2046" y="4162.2939"/><text fill="#000000" font-family="Verdana" font-size="14" lengthAdjust="spacing" textLength="90.0977" x="423.2046" y="4183.3691">API Gateway</text></g><g class="participant participant-head" data-participant="JS"><rect fill="#FFFFFF" height="31.0146" rx="2.5" ry="2.5" style="stroke:#000000;stroke-width:1;" width="94.1514" x="685.957" y="98.7373"/><text fill="#000000" font-family="Verdana" font-size="14" lengthAdjust="spacing" textLength="80.1514" x="692.957" y="119.8125">Job Service</text></g><g class="participant participant-tail" data-participant="JS"><rect fill="#FFFFFF" height="31.0146" rx="2.5" ry="2.5" style="stroke:#000000;stroke-width:1;" width="94.1514" x="685.957" y="4162.2939"/><text fill="#000000" font-family="Verdana" font-size="14" lengthAdjust="spacing" textLength="80.1514" x="692.957" y="4183.3691">Job Service</text></g><g class="participant participant-head" data-participant="DB"><text fill="#000000" font-family="Verdana" font-size="14" lengthAdjust="spacing" textLength="81.1699" x="909.5713" y="127.8125">PostgreSQL</text><path d="M935.1563,77.7373 C935.1563,67.7373 953.1563,67.7373 953.1563,67.7373 C953.1563,67.7373 971.1563,67.7373 971.1563,77.7373 L971.1563,103.7373 C971.1563,113.7373 953.1563,113.7373 953.1563,113.7373 C953.1563,113.7373 935.1563,113.7373 935.1563,103.7373 L935.1563,77.7373" fill="#FFFFFF" style="stroke:#000000;stroke-width:1;"/><path d="M935.1563,77.7373 C935.1563,87.7373 953.1563,87.7373 953.1563,87.7373 C953.1563,87.7373 971.1563,87.7373 971.1563,77.7373" fill="none" style="stroke:#000000;stroke-width:1;"/></g><g class="participant participant-tail" data-participant="DB"><text fill="#000000" font-family="Verdana" font-size="14" lengthAdjust="spacing" textLength="81.1699" x="909.5713" y="4176.3691">PostgreSQL</text><path d="M935.1563,4189.3086 C935.1563,4179.3086 953.1563,4179.3086 953.1563,4179.3086 C953.1563,4179.3086 971.1563,4179.3086 971.1563,4189.3086 L971.1563,4215.3086 C971.1563,4225.3086 953.1563,4225.3086 953.1563,4225.3086 C953.1563,4225.3086 935.1563,4225.3086 935.1563,4215.3086 L935.1563,4189.3086" fill="#FFFFFF" style="stroke:#000000;stroke-width:1;"/><path d="M935.1563,4189.3086 C935.1563,4199.3086 953.1563,4199.3086 953.1563,4199.3086 C953.1563,4199.3086 971.1563,4199.3086 971.1563,4189.3086" fill="none" style="stroke:#000000;stroke-width:1;"/></g><g class="participant participant-head" data-participant="BW"><rect fill="#FFFFFF" height="48.0293" rx="2.5" ry="2.5" style="stroke:#000000;stroke-width:1;" width="97.2207" x="1122.2129" y="81.7227"/><text fill="#000000" font-family="Verdana" font-size="14" lengthAdjust="spacing" textLength="83.2207" x="1129.2129" y="102.7979">Background</text><text fill="#000000" font-family="Verdana" font-size="14" lengthAdjust="spacing" textLength="50.9141" x="1145.3662" y="119.8125">Worker</text></g><g class="participant participant-tail" data-participant="BW"><rect fill="#FFFFFF" height="48.0293" rx="2.5" ry="2.5" style="stroke:#000000;stroke-width:1;" width="97.2207" x="1122.2129" y="4162.2939"/><text fill="#000000" font-family="Verdana" font-size="14" lengthAdjust="spacing" textLength="83.2207" x="1129.2129" y="4183.3691">Background</text><text fill="#000000" font-family="Verdana" font-size="14" lengthAdjust="spacing" textLength="50.9141" x="1145.3662" y="4200.3838">Worker</text></g><g class="participant participant-head" data-participant="MS"><rect fill="#FFFFFF" height="31.0146" rx="2.5" ry="2.5" style="stroke:#000000;stroke-width:1;" width="130.7646" x="1326.853" y="98.7373"/><text fill="#000000" font-family="Verdana" font-size="14" lengthAdjust="spacing" textLength="116.7646" x="1333.853" y="119.8125">Message Service</text></g><g class="participant participant-tail" data-participant="MS"><rect fill="#FFFFFF" height="31.0146" rx="2.5" ry="2.5" style="stroke:#000000;stroke-width:1;" width="130.7646" x="1326.853" y="4162.2939"/><text fill="#000000" font-family="Verdana" font-size="14" lengthAdjust="spacing" textLength="116.7646" x="1333.853" y="4183.3691">Message Service</text></g><g class="participant participant-head" data-participant="WH"><rect fill="#FFFFFF" height="31.0146" rx="2.5" ry="2.5" style="stroke:#000000;stroke-width:1;" width="79.0439" x="1593.1978" y="98.7373"/><text fill="#000000" font-family="Verdana" font-size="14" lengthAdjust="spacing" textLength="65.0439" x="1600.1978" y="119.8125">Webhook</text></g><g class="participant participant-tail" data-participant="WH"><rect fill="#FFFFFF" height="31.0146" rx="2.5" ry="2.5" style="stroke:#000000;stroke-width:1;" width="79.0439" x="1593.1978" y="4162.2939"/><text fill="#000000" font-family="Verdana" font-size="14" lengthAdjust="spacing" textLength="65.0439" x="1600.1978" y="4183.3691">Webhook</text></g><rect fill="#FFFFFF" height="3" style="stroke:#FFFFFF;stroke-width:1;" width="1717.2417" x="5" y="161.6516"/><line style="stroke:#000000;stroke-width:0.5;" x1="5" x2="1722.2417" y1="161.6516" y2="161.6516"/><line style="stroke:#000000;stroke-width:0.5;" x1="5" x2="1722.2417" y1="164.6516" y2="164.6516"/><rect fill="#FFFFFF" height="23.7993" style="stroke:#000000;stroke-width:1;" width="235.9014" x="745.6702" y="150.752"/><text fill="#000000" font-family="Verdana" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="217.458" x="751.6702" y="167.8218">Client Submits Async Request</text><g class="message" data-participant-1="Client" data-participant-2="API"><polygon fill="#000000" points="456.2534,312.9458,466.2534,316.9458,456.2534,320.9458,460.2534,316.9458" style="stroke:#000000;stroke-width:1;"/><line style="stroke:#000000;stroke-width:1;" x1="162.0874" x2="462.2534" y1="316.9458" y2="316.9458"/><text fill="#000000" font-family="Verdana" font-size="13" lengthAdjust="spacing" textLength="236.8755" x="169.0874" y="201.6211">POST /sessions/:id/messages/async</text><text fill="#000000" font-family="Verdana" font-size="13" lengthAdjust="spacing" textLength="247.2539" x="169.0874" y="217.4204">X-Idempotency-Key: msg_async_789</text><text fill="#000000" font-family="Verdana" font-size="13" lengthAdjust="spacing" textLength="8.252" x="169.0874" y="233.2197">{</text><text fill="#000000" font-family="Verdana" font-size="13" lengthAdjust="spacing" textLength="180.9844" x="178.228" y="249.019">"content": "Analyze my last</text><text fill="#000000" font-family="Verdana" font-size="13" lengthAdjust="spacing" textLength="173.6528" x="228.5015" y="264.8184">6 months of transactions",</text><text fill="#000000" font-family="Verdana" font-size="13" lengthAdjust="spacing" textLength="232.4321" x="178.228" y="280.6177">"callbackUrl": "https://myapp.com/</text><text fill="#000000" font-family="Verdana" font-size="13" lengthAdjust="spacing" textLength="199.9004" x="251.353" y="296.417">webhooks/message-complete"</text><text fill="#000000" font-family="Verdana" font-size="13" lengthAdjust="spacing" textLength="8.252" x="169.0874" y="312.2163">}</text></g><g class="message" data-participant-1="API" data-participant-2="JS"><polygon fill="#000000" points="721.0327,405.9424,731.0327,409.9424,721.0327,413.9424,725.0327,409.9424" style="stroke:#000000;stroke-width:1;"/><line style="stroke:#000000;stroke-width:1;" x1="468.2534" x2="727.0327" y1="409.9424" y2="409.9424"/><text fill="#000000" font-family="Verdana" font-size="13" lengthAdjust="spacing" textLength="68.542" x="475.2534" y="342.0156">createJob(</text><text fill="#000000" font-family="Verdana" font-size="13" lengthAdjust="spacing" textLength="153.1118" x="475.2534" y="357.8149">type: SEND_MESSAGE,</text><text fill="#000000" font-family="Verdana" font-size="13" lengthAdjust="spacing" textLength="79.1362" x="475.2534" y="373.6143">input: {...},</text><text fill="#000000" font-family="Verdana" font-size="13" lengthAdjust="spacing" textLength="70.7192" x="475.2534" y="389.4136">callbackUrl</text><text fill="#000000" font-family="Verdana" font-size="13" lengthAdjust="spacing" textLength="5.9033" x="475.2534" y="405.2129">)</text></g><g class="message" data-participant-1="JS" data-participant-2="DB"><polygon fill="#000000" points="941.1563,483.1396,951.1563,487.1396,941.1563,491.1396,945.1563,487.1396" style="stroke:#000000;stroke-width:1;"/><line style="stroke:#000000;stroke-width:1;" x1="733.0327" x2="947.1563" y1="487.1396" y2="487.1396"/><text fill="#000000" font-family="Verdana" font-size="13" lengthAdjust="spacing" textLength="81.1611" x="740.0327" y="435.0122">INSERT jobs</text><text fill="#000000" font-family="Verdana" font-size="13" lengthAdjust="spacing" textLength="146.9546" x="740.0327" y="450.8115">(tenantId, type, input,</text><text fill="#000000" font-family="Verdana" font-size="13" lengthAdjust="spacing" textLength="196.1235" x="740.0327" y="466.6108">callbackUrl, status: PENDING,</text><text fill="#000000" font-family="Verdana" font-size="13" lengthAdjust="spacing" textLength="81.1167" x="740.0327" y="482.4102">progress: 0)</text></g><g class="message" data-participant-1="DB" data-participant-2="JS"><polygon fill="#000000" points="744.0327,512.939,734.0327,516.939,744.0327,520.939,740.0327,516.939" style="stroke:#000000;stroke-width:1;"/><line style="stroke:#000000;stroke-width:1;stroke-dasharray:2,2;" x1="738.0327" x2="952.1563" y1="516.939" y2="516.939"/><text fill="#000000" font-family="Verdana" font-size="13" lengthAdjust="spacing" textLength="123.0747" x="750.0327" y="512.2095">jobId = job_jkl012</text></g><g class="message" data-participant-1="JS" data-participant-2="API"><polygon fill="#000000" points="479.2534,621.7349,469.2534,625.7349,479.2534,629.7349,475.2534,625.7349" style="stroke:#000000;stroke-width:1;"/><line style="stroke:#000000;stroke-width:1;stroke-dasharray:2,2;" x1="473.2534" x2="732.0327" y1="625.7349" y2="625.7349"/><text fill="#000000" font-family="Verdana" font-size="13" lengthAdjust="spacing" textLength="75.3086" x="485.2534" y="542.0088">Job created</text><text fill="#000000" font-family="Verdana" font-size="13" lengthAdjust="spacing" textLength="8.252" x="485.2534" y="557.8081">{</text><text fill="#000000" font-family="Verdana" font-size="13" lengthAdjust="spacing" textLength="142.3652" x="494.394" y="573.6074">"jobId": "job_jkl012",</text><text fill="#000000" font-family="Verdana" font-size="13" lengthAdjust="spacing" textLength="139.9722" x="494.394" y="589.4067">"status": "PENDING",</text><text fill="#000000" font-family="Verdana" font-size="13" lengthAdjust="spacing" textLength="231.6387" x="494.394" y="605.2061">"pollUrl": "/api/v1/jobs/job_jkl012"</text><text fill="#000000" font-family="Verdana" font-size="13" lengthAdjust="spacing" textLength="8.252" x="485.2534" y="621.0054">}</text></g><g class="message" data-participant-1="API" data-participant-2="Client"><polygon fill="#000000" points="173.0874,730.5308,163.0874,734.5308,173.0874,738.5308,169.0874,734.5308" style="stroke:#000000;stroke-width:1;"/><line style="stroke:#000000;stroke-width:1;stroke-dasharray:2,2;" x1="167.0874" x2="467.2534" y1="734.5308" y2="734.5308"/><text fill="#000000" font-family="Verdana" font-size="13" lengthAdjust="spacing" textLength="88.6069" x="179.0874" y="650.8047">202 Accepted</text><text fill="#000000" font-family="Verdana" font-size="13" lengthAdjust="spacing" textLength="8.252" x="179.0874" y="666.604">{</text><text fill="#000000" font-family="Verdana" font-size="13" lengthAdjust="spacing" textLength="142.3652" x="188.228" y="682.4033">"jobId": "job_jkl012",</text><text fill="#000000" font-family="Verdana" font-size="13" lengthAdjust="spacing" textLength="139.9722" x="188.228" y="698.2026">"status": "PENDING",</text><text fill="#000000" font-family="Verdana" font-size="13" lengthAdjust="spacing" textLength="231.6387" x="188.228" y="714.002">"pollUrl": "/api/v1/jobs/job_jkl012"</text><text fill="#000000" font-family="Verdana" font-size="13" lengthAdjust="spacing" textLength="8.252" x="179.0874" y="729.8013">}</text></g><path d="M167,747.5308 L167,820.5308 L376,820.5308 L376,757.5308 L366,747.5308 L167,747.5308" fill="#FFFFFF" style="stroke:#000000;stroke-width:1;"/><path d="M366,747.5308 L366,757.5308 L376,757.5308 L366,747.5308" fill="#FFFFFF" style="stroke:#000000;stroke-width:1;"/><text fill="#000000" font-family="Verdana" font-size="13" lengthAdjust="spacing" textLength="101.9116" x="173" y="765.6006">Client can now:</text><text fill="#000000" font-family="Verdana" font-size="13" lengthAdjust="spacing" textLength="172.0342" x="173" y="781.3999">1. Poll the status endpoint</text><text fill="#000000" font-family="Verdana" font-size="13" lengthAdjust="spacing" textLength="188.9063" x="173" y="797.1992">2. Wait for webhook callback</text><text fill="#000000" font-family="Verdana" font-size="13" lengthAdjust="spacing" textLength="183.2124" x="173" y="812.9985">3. Continue with other work</text><rect fill="#FFFFFF" height="3" style="stroke:#FFFFFF;stroke-width:1;" width="1717.2417" x="5" y="846.6277"/><line style="stroke:#000000;stroke-width:0.5;" x1="5" x2="1722.2417" y1="846.6277" y2="846.6277"/><line style="stroke:#000000;stroke-width:0.5;" x1="5" x2="1722.2417" y1="849.6277" y2="849.6277"/><rect fill="#FFFFFF" height="23.7993" style="stroke:#000000;stroke-width:1;" width="260.0669" x="733.5874" y="835.728"/><text fill="#000000" font-family="Verdana" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="241.6235" x="739.5874" y="852.7979">Background Worker Picks Up Job</text><path d="M1073,874.5273 L1073,947.5273 L1268,947.5273 L1268,884.5273 L1258,874.5273 L1073,874.5273" fill="#FFFFFF" style="stroke:#000000;stroke-width:1;"/><path d="M1258,874.5273 L1258,884.5273 L1268,884.5273 L1258,874.5273" fill="#FFFFFF" style="stroke:#000000;stroke-width:1;"/><text fill="#000000" font-family="Verdana" font-size="13" lengthAdjust="spacing" textLength="173.2783" x="1079" y="892.5972">Worker runs continuously:</text><text fill="#000000" font-family="Verdana" font-size="13" lengthAdjust="spacing" textLength="174.0972" x="1079" y="908.3965">&#8226; In-memory queue (MVP)</text><text fill="#000000" font-family="Verdana" font-size="13" lengthAdjust="spacing" textLength="166.1436" x="1079" y="924.1958">&#8226; Polls every 1-5 seconds</text><text fill="#000000" font-family="Verdana" font-size="13" lengthAdjust="spacing" textLength="151.0615" x="1079" y="939.9951">&#8226; Future: Redis/BullMQ</text><g class="message" data-participant-1="BW" data-participant-2="DB"><polygon fill="#000000" points="964.1563,1033.7212,954.1563,1037.7212,964.1563,1041.7212,960.1563,1037.7212" style="stroke:#000000;stroke-width:1;"/><line style="stroke:#000000;stroke-width:1;" x1="958.1563" x2="1169.8232" y1="1037.7212" y2="1037.7212"/><text fill="#000000" font-family="Verdana" font-size="13" lengthAdjust="spacing" textLength="136.5635" x="970.1563" y="969.7944">SELECT * FROM jobs</text><text fill="#000000" font-family="Verdana" font-size="13" lengthAdjust="spacing" textLength="180.3369" x="970.1563" y="985.5938">WHERE status = 'PENDING'</text><text fill="#000000" font-family="Verdana" font-size="13" lengthAdjust="spacing" textLength="135.4463" x="970.1563" y="1001.3931">ORDER BY createdAt</text><text fill="#000000" font-family="Verdana" font-size="13" lengthAdjust="spacing" textLength="49.9814" x="970.1563" y="1017.1924">LIMIT 1</text><text fill="#000000" font-family="Verdana" font-size="13" lengthAdjust="spacing" textLength="177.9375" x="970.1563" y="1032.9917">FOR UPDATE SKIP LOCKED</text></g><g class="message" data-participant-1="DB" data-participant-2="BW"><polygon fill="#000000" points="1158.8232,1063.5205,1168.8232,1067.5205,1158.8232,1071.5205,1162.8232,1067.5205" style="stroke:#000000;stroke-width:1;"/><line style="stroke:#000000;stroke-width:1;stroke-dasharray:2,2;" x1="953.1563" x2="1164.8232" y1="1067.5205" y2="1067.5205"/><text fill="#000000" font-family="Verdana" font-size="13" lengthAdjust="spacing" textLength="149.1191" x="960.1563" y="1062.791">Job found (job_jkl012)</text></g><g class="message" data-participant-1="BW" data-participant-2="DB"><polygon fill="#000000" points="964.1563,1140.7178,954.1563,1144.7178,964.1563,1148.7178,960.1563,1144.7178" style="stroke:#000000;stroke-width:1;"/><line style="stroke:#000000;stroke-width:1;" x1="958.1563" x2="1169.8232" y1="1144.7178" y2="1144.7178"/><text fill="#000000" font-family="Verdana" font-size="13" lengthAdjust="spacing" textLength="84.2969" x="970.1563" y="1092.5903">UPDATE jobs</text><text fill="#000000" font-family="Verdana" font-size="13" lengthAdjust="spacing" textLength="188.4619" x="970.1563" y="1108.3896">SET status = 'PROCESSING',</text><text fill="#000000" font-family="Verdana" font-size="13" lengthAdjust="spacing" textLength="123.2969" x="970.1563" y="1124.189">startedAt = now(),</text><text fill="#000000" font-family="Verdana" font-size="13" lengthAdjust="spacing" textLength="92.7837" x="970.1563" y="1139.9883">progress = 10</text></g><path d="M1175,1157.7178 L1175,1182.7178 L1302,1182.7178 L1302,1167.7178 L1292,1157.7178 L1175,1157.7178" fill="#FFFFFF" style="stroke:#000000;stroke-width:1;"/><path d="M1292,1157.7178 L1292,1167.7178 L1302,1167.7178 L1292,1157.7178" fill="#FFFFFF" style="stroke:#000000;stroke-width:1;"/><text fill="#000000" font-family="Verdana" font-size="13" lengthAdjust="spacing" textLength="106.5518" x="1181" y="1175.7876">Start processing</text><rect fill="#FFFFFF" height="3" style="stroke:#FFFFFF;stroke-width:1;" width="1717.2417" x="5" y="1209.4167"/><line style="stroke:#000000;stroke-width:0.5;" x1="5" x2="1722.2417" y1="1209.4167" y2="1209.4167"/><line style="stroke:#000000;stroke-width:0.5;" x1="5" x2="1722.2417" y1="1212.4167" y2="1212.4167"/><rect fill="#FFFFFF" height="23.7993" style="stroke:#000000;stroke-width:1;" width="253.1416" x="737.05" y="1198.5171"/><text fill="#000000" font-family="Verdana" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="234.6982" x="743.05" y="1215.5869">Process Message (Normal Flow)</text><g class="message" data-participant-1="BW" data-participant-2="MS"><polygon fill="#000000" points="1380.2354,1316.313,1390.2354,1320.313,1380.2354,1324.313,1384.2354,1320.313" style="stroke:#000000;stroke-width:1;"/><line style="stroke:#000000;stroke-width:1;" x1="1170.8232" x2="1386.2354" y1="1320.313" y2="1320.313"/><text fill="#000000" font-family="Verdana" font-size="13" lengthAdjust="spacing" textLength="111.4014" x="1177.8232" y="1252.3862">processMessage(</text><text fill="#000000" font-family="Verdana" font-size="13" lengthAdjust="spacing" textLength="66.0474" x="1177.8232" y="1268.1855">sessionId,</text><text fill="#000000" font-family="Verdana" font-size="13" lengthAdjust="spacing" textLength="53.8345" x="1177.8232" y="1283.9849">content,</text><text fill="#000000" font-family="Verdana" font-size="13" lengthAdjust="spacing" textLength="108.0498" x="1177.8232" y="1299.7842">idempotencyKey</text><text fill="#000000" font-family="Verdana" font-size="13" lengthAdjust="spacing" textLength="5.9033" x="1177.8232" y="1315.5835">)</text></g><path d="M1397,1237.3164 L1397,1325.3164 L1614,1325.3164 L1614,1247.3164 L1604,1237.3164 L1397,1237.3164" fill="#FFFFFF" style="stroke:#000000;stroke-width:1;"/><path d="M1604,1237.3164 L1604,1247.3164 L1614,1247.3164 L1604,1237.3164" fill="#FFFFFF" style="stroke:#000000;stroke-width:1;"/><text fill="#000000" font-family="Verdana" font-size="13" lengthAdjust="spacing" textLength="196.3394" x="1403" y="1255.3862">Same flow as sync messages:</text><text fill="#000000" font-family="Verdana" font-size="13" lengthAdjust="spacing" textLength="94.6499" x="1403" y="1271.1855">- Load context</text><text fill="#000000" font-family="Verdana" font-size="13" lengthAdjust="spacing" textLength="93.2534" x="1403" y="1286.9849">- Call provider</text><text fill="#000000" font-family="Verdana" font-size="13" lengthAdjust="spacing" textLength="109.0337" x="1403" y="1302.7842">- Store response</text><text fill="#000000" font-family="Verdana" font-size="13" lengthAdjust="spacing" textLength="73.3091" x="1403" y="1318.5835">- Bill usage</text><g class="message" data-participant-1="MS" data-participant-2="MS"><line style="stroke:#000000;stroke-width:1;" x1="1392.2354" x2="1434.2354" y1="1368.9116" y2="1368.9116"/><line style="stroke:#000000;stroke-width:1;" x1="1434.2354" x2="1434.2354" y1="1368.9116" y2="1381.9116"/><line style="stroke:#000000;stroke-width:1;" x1="1393.2354" x2="1434.2354" y1="1381.9116" y2="1381.9116"/><polygon fill="#000000" points="1403.2354,1377.9116,1393.2354,1381.9116,1403.2354,1385.9116,1399.2354,1381.9116" style="stroke:#000000;stroke-width:1;"/><text fill="#000000" font-family="Verdana" font-size="13" lengthAdjust="spacing" textLength="125.6836" x="1399.2354" y="1348.3828">Process message...</text><text fill="#000000" font-family="Verdana" font-size="13" lengthAdjust="spacing" textLength="226.4844" x="1399.2354" y="1364.1821">(see Message Processing diagram)</text></g><path d="M899.5713,1396.9116 L963.6206,1396.9116 L963.6206,1404.7109 L953.6206,1414.7109 L899.5713,1414.7109 L899.5713,1396.9116" fill="#FFFFFF" style="stroke:#000000;stroke-width:1;"/><rect fill="none" height="476.7529" style="stroke:#000000;stroke-width:1;" width="578.0464" x="899.5713" y="1396.9116"/><text fill="#000000" font-family="Verdana" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="19.0493" x="914.5713" y="1410.9814">alt</text><text fill="#000000" font-family="Verdana" font-size="11" font-weight="bold" lengthAdjust="spacing" textLength="60.9082" x="978.6206" y="1409.9707">[Success]</text><g class="message" data-participant-1="MS" data-participant-2="BW"><polygon fill="#000000" points="1181.8232,1527.3062,1171.8232,1531.3062,1181.8232,1535.3062,1177.8232,1531.3062" style="stroke:#000000;stroke-width:1;"/><line style="stroke:#000000;stroke-width:1;stroke-dasharray:2,2;" x1="1175.8232" x2="1391.2354" y1="1531.3062" y2="1531.3062"/><text fill="#000000" font-family="Verdana" font-size="13" lengthAdjust="spacing" textLength="97.4492" x="1187.8232" y="1431.7808">Message result</text><text fill="#000000" font-family="Verdana" font-size="13" lengthAdjust="spacing" textLength="8.252" x="1187.8232" y="1447.5801">{</text><text fill="#000000" font-family="Verdana" font-size="13" lengthAdjust="spacing" textLength="156.292" x="1196.9639" y="1463.3794">messageId: "msg_xyz",</text><text fill="#000000" font-family="Verdana" font-size="13" lengthAdjust="spacing" textLength="159.4976" x="1196.9639" y="1479.1787">content: "Based on your</text><text fill="#000000" font-family="Verdana" font-size="13" lengthAdjust="spacing" textLength="147.1387" x="1238.0967" y="1494.978">transaction history...",</text><text fill="#000000" font-family="Verdana" font-size="13" lengthAdjust="spacing" textLength="103.3208" x="1196.9639" y="1510.7773">metadata: {...}</text><text fill="#000000" font-family="Verdana" font-size="13" lengthAdjust="spacing" textLength="8.252" x="1187.8232" y="1526.5767">}</text></g><g class="message" data-participant-1="BW" data-participant-2="DB"><polygon fill="#000000" points="964.1563,1620.3027,954.1563,1624.3027,964.1563,1628.3027,960.1563,1624.3027" style="stroke:#000000;stroke-width:1;"/><line style="stroke:#000000;stroke-width:1;" x1="958.1563" x2="1169.8232" y1="1624.3027" y2="1624.3027"/><text fill="#000000" font-family="Verdana" font-size="13" lengthAdjust="spacing" textLength="84.2969" x="970.1563" y="1556.376">UPDATE jobs</text><text fill="#000000" font-family="Verdana" font-size="13" lengthAdjust="spacing" textLength="180.813" x="970.1563" y="1572.1753">SET status = 'COMPLETED',</text><text fill="#000000" font-family="Verdana" font-size="13" lengthAdjust="spacing" textLength="74.2866" x="970.1563" y="1587.9746">output = ?,</text><text fill="#000000" font-family="Verdana" font-size="13" lengthAdjust="spacing" textLength="105.7773" x="970.1563" y="1603.7739">progress = 100,</text><text fill="#000000" font-family="Verdana" font-size="13" lengthAdjust="spacing" textLength="140.0356" x="970.1563" y="1619.5732">completedAt = now()</text></g><path d="M1175,1637.3027 L1175,1662.3027 L1372,1662.3027 L1372,1647.3027 L1362,1637.3027 L1175,1637.3027" fill="#FFFFFF" style="stroke:#000000;stroke-width:1;"/><path d="M1362,1637.3027 L1362,1647.3027 L1372,1647.3027 L1362,1637.3027" fill="#FFFFFF" style="stroke:#000000;stroke-width:1;"/><text fill="#000000" font-family="Verdana" font-size="13" lengthAdjust="spacing" textLength="176.1855" x="1181" y="1655.3726">Job completed successfully</text><line style="stroke:#000000;stroke-width:1;stroke-dasharray:2,2;" x1="899.5713" x2="1477.6177" y1="1669.1021" y2="1669.1021"/><text fill="#000000" font-family="Verdana" font-size="11" font-weight="bold" lengthAdjust="spacing" textLength="125.5439" x="904.5713" y="1680.1611">[Processing Failure]</text><g class="message" data-participant-1="MS" data-participant-2="BW"><polygon fill="#000000" points="1181.8232,1732.8687,1171.8232,1736.8687,1181.8232,1740.8687,1177.8232,1736.8687" style="stroke:#000000;stroke-width:1;"/><line style="stroke:#000000;stroke-width:1;stroke-dasharray:2,2;" x1="1175.8232" x2="1391.2354" y1="1736.8687" y2="1736.8687"/><text fill="#000000" font-family="Verdana" font-size="13" lengthAdjust="spacing" textLength="32.7539" x="1187.8232" y="1700.5405">Error</text><text fill="#000000" font-family="Verdana" font-size="13" lengthAdjust="spacing" textLength="104.749" x="1187.8232" y="1716.3398">(provider failed,</text><text fill="#000000" font-family="Verdana" font-size="13" lengthAdjust="spacing" textLength="89.8892" x="1187.8232" y="1732.1392">timeout, etc.)</text></g><g class="message" data-participant-1="BW" data-participant-2="DB"><polygon fill="#000000" points="964.1563,1825.8652,954.1563,1829.8652,964.1563,1833.8652,960.1563,1829.8652" style="stroke:#000000;stroke-width:1;"/><line style="stroke:#000000;stroke-width:1;" x1="958.1563" x2="1169.8232" y1="1829.8652" y2="1829.8652"/><text fill="#000000" font-family="Verdana" font-size="13" lengthAdjust="spacing" textLength="84.2969" x="970.1563" y="1761.9385">UPDATE jobs</text><text fill="#000000" font-family="Verdana" font-size="13" lengthAdjust="spacing" textLength="148.3066" x="970.1563" y="1777.7378">SET status = 'FAILED',</text><text fill="#000000" font-family="Verdana" font-size="13" lengthAdjust="spacing" textLength="119.7739" x="970.1563" y="1793.5371">errorMessage = ?,</text><text fill="#000000" font-family="Verdana" font-size="13" lengthAdjust="spacing" textLength="89.248" x="970.1563" y="1809.3364">progress = 0,</text><text fill="#000000" font-family="Verdana" font-size="13" lengthAdjust="spacing" textLength="140.0356" x="970.1563" y="1825.1357">completedAt = now()</text></g><path d="M1175,1842.8652 L1175,1867.8652 L1257,1867.8652 L1257,1852.8652 L1247,1842.8652 L1175,1842.8652" fill="#FFFFFF" style="stroke:#000000;stroke-width:1;"/><path d="M1247,1842.8652 L1247,1852.8652 L1257,1852.8652 L1247,1842.8652" fill="#FFFFFF" style="stroke:#000000;stroke-width:1;"/><text fill="#000000" font-family="Verdana" font-size="13" lengthAdjust="spacing" textLength="61.8262" x="1181" y="1860.9351">Job failed</text><rect fill="#FFFFFF" height="3" style="stroke:#FFFFFF;stroke-width:1;" width="1717.2417" x="5" y="1901.5642"/><line style="stroke:#000000;stroke-width:0.5;" x1="5" x2="1722.2417" y1="1901.5642" y2="1901.5642"/><line style="stroke:#000000;stroke-width:0.5;" x1="5" x2="1722.2417" y1="1904.5642" y2="1904.5642"/><rect fill="#FFFFFF" height="23.7993" style="stroke:#000000;stroke-width:1;" width="304.1514" x="711.5452" y="1890.6646"/><text fill="#000000" font-family="Verdana" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="285.708" x="717.5452" y="1907.7344">Send Webhook Callback (if configured)</text><g class="message" data-participant-1="BW" data-participant-2="DB"><polygon fill="#000000" points="964.1563,1973.8618,954.1563,1977.8618,964.1563,1981.8618,960.1563,1977.8618" style="stroke:#000000;stroke-width:1;"/><line style="stroke:#000000;stroke-width:1;" x1="958.1563" x2="1169.8232" y1="1977.8618" y2="1977.8618"/><text fill="#000000" font-family="Verdana" font-size="13" lengthAdjust="spacing" textLength="136.5635" x="970.1563" y="1941.5337">SELECT * FROM jobs</text><text fill="#000000" font-family="Verdana" font-size="13" lengthAdjust="spacing" textLength="91.2095" x="970.1563" y="1957.333">WHERE id = ?</text><text fill="#000000" font-family="Verdana" font-size="13" lengthAdjust="spacing" textLength="193.667" x="970.1563" y="1973.1323">AND callbackUrl IS NOT NULL</text></g><path d="M879.5713,1992.8618 L943.6206,1992.8618 L943.6206,2000.6611 L933.6206,2010.6611 L879.5713,2010.6611 L879.5713,1992.8618" fill="#FFFFFF" style="stroke:#000000;stroke-width:1;"/><rect fill="none" height="796.7134" style="stroke:#000000;stroke-width:1;" width="832.6704" x="879.5713" y="1992.8618"/><text fill="#000000" font-family="Verdana" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="19.0493" x="894.5713" y="2006.9316">alt</text><text fill="#000000" font-family="Verdana" font-size="11" font-weight="bold" lengthAdjust="spacing" textLength="161.9976" x="958.6206" y="2005.9209">[Callback URL configured]</text><g class="message" data-participant-1="DB" data-participant-2="BW"><polygon fill="#000000" points="1158.8232,2028.4604,1168.8232,2032.4604,1158.8232,2036.4604,1162.8232,2032.4604" style="stroke:#000000;stroke-width:1;"/><line style="stroke:#000000;stroke-width:1;stroke-dasharray:2,2;" x1="953.1563" x2="1164.8232" y1="2032.4604" y2="2032.4604"/><text fill="#000000" font-family="Verdana" font-size="13" lengthAdjust="spacing" textLength="129.3145" x="960.1563" y="2027.731">Job with callbackUrl</text></g><g class="message" data-participant-1="BW" data-participant-2="WH"><polygon fill="#000000" points="1620.7197,2232.0522,1630.7197,2236.0522,1620.7197,2240.0522,1624.7197,2236.0522" style="stroke:#000000;stroke-width:1;"/><line style="stroke:#000000;stroke-width:1;" x1="1170.8232" x2="1626.7197" y1="2236.0522" y2="2236.0522"/><text fill="#000000" font-family="Verdana" font-size="13" lengthAdjust="spacing" textLength="243.7373" x="1177.8232" y="2057.5303">POST https://myapp.com/webhooks/</text><text fill="#000000" font-family="Verdana" font-size="13" lengthAdjust="spacing" textLength="123.0747" x="1177.8232" y="2073.3296">message-complete</text><text fill="#000000" font-family="Verdana" font-size="13" lengthAdjust="spacing" textLength="8.252" x="1177.8232" y="2089.1289">{</text><text fill="#000000" font-family="Verdana" font-size="13" lengthAdjust="spacing" textLength="142.3652" x="1186.9639" y="2104.9282">"jobId": "job_jkl012",</text><text fill="#000000" font-family="Verdana" font-size="13" lengthAdjust="spacing" textLength="158.7041" x="1186.9639" y="2120.7275">"status": "COMPLETED",</text><text fill="#000000" font-family="Verdana" font-size="13" lengthAdjust="spacing" textLength="73.3472" x="1186.9639" y="2136.5269">"output": {</text><text fill="#000000" font-family="Verdana" font-size="13" lengthAdjust="spacing" textLength="168.2256" x="1196.1045" y="2152.3262">"messageId": "msg_xyz",</text><text fill="#000000" font-family="Verdana" font-size="13" lengthAdjust="spacing" textLength="196.314" x="1196.1045" y="2168.1255">"content": "Based on your...",</text><text fill="#000000" font-family="Verdana" font-size="13" lengthAdjust="spacing" textLength="115.2544" x="1196.1045" y="2183.9248">"metadata": {...}</text><text fill="#000000" font-family="Verdana" font-size="13" lengthAdjust="spacing" textLength="12.981" x="1186.9639" y="2199.7241">},</text><text fill="#000000" font-family="Verdana" font-size="13" lengthAdjust="spacing" textLength="272.27" x="1186.9639" y="2215.5234">"completedAt": "2024-01-15T10:12:05Z"</text><text fill="#000000" font-family="Verdana" font-size="13" lengthAdjust="spacing" textLength="8.252" x="1177.8232" y="2231.3228">}</text></g><path d="M889.5713,2251.0522 L953.6206,2251.0522 L953.6206,2258.8516 L943.6206,2268.8516 L889.5713,2268.8516 L889.5713,2251.0522" fill="#FFFFFF" style="stroke:#000000;stroke-width:1;"/><rect fill="none" height="531.5229" style="stroke:#000000;stroke-width:1;" width="812.6704" x="889.5713" y="2251.0522"/><text fill="#000000" font-family="Verdana" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="19.0493" x="904.5713" y="2265.1221">alt</text><text fill="#000000" font-family="Verdana" font-size="11" font-weight="bold" lengthAdjust="spacing" textLength="121.1074" x="968.6206" y="2264.1113">[Webhook success]</text><g class="message" data-participant-1="WH" data-participant-2="BW"><polygon fill="#000000" points="1181.8232,2286.6509,1171.8232,2290.6509,1181.8232,2294.6509,1177.8232,2290.6509" style="stroke:#000000;stroke-width:1;"/><line style="stroke:#000000;stroke-width:1;stroke-dasharray:2,2;" x1="1175.8232" x2="1631.7197" y1="2290.6509" y2="2290.6509"/><text fill="#000000" font-family="Verdana" font-size="13" lengthAdjust="spacing" textLength="48.604" x="1187.8232" y="2285.9214">200 OK</text></g><g class="message" data-participant-1="BW" data-participant-2="DB"><polygon fill="#000000" points="964.1563,2332.2495,954.1563,2336.2495,964.1563,2340.2495,960.1563,2336.2495" style="stroke:#000000;stroke-width:1;"/><line style="stroke:#000000;stroke-width:1;" x1="958.1563" x2="1169.8232" y1="2336.2495" y2="2336.2495"/><text fill="#000000" font-family="Verdana" font-size="13" lengthAdjust="spacing" textLength="84.2969" x="970.1563" y="2315.7207">UPDATE jobs</text><text fill="#000000" font-family="Verdana" font-size="13" lengthAdjust="spacing" textLength="158.1772" x="970.1563" y="2331.52">SET callbackSent = true</text></g><line style="stroke:#000000;stroke-width:1;stroke-dasharray:2,2;" x1="889.5713" x2="1702.2417" y1="2345.2495" y2="2345.2495"/><text fill="#000000" font-family="Verdana" font-size="11" font-weight="bold" lengthAdjust="spacing" textLength="113.5664" x="894.5713" y="2356.3086">[Webhook failure]</text><g class="message" data-participant-1="WH" data-participant-2="BW"><polygon fill="#000000" points="1181.8232,2377.4175,1171.8232,2381.4175,1181.8232,2385.4175,1177.8232,2381.4175" style="stroke:#000000;stroke-width:1;"/><line style="stroke:#000000;stroke-width:1;stroke-dasharray:2,2;" x1="1175.8232" x2="1631.7197" y1="2381.4175" y2="2381.4175"/><text fill="#000000" font-family="Verdana" font-size="13" lengthAdjust="spacing" textLength="108.0625" x="1187.8232" y="2376.688">Timeout or error</text></g><path d="M1175,2394.4175 L1175,2482.4175 L1383,2482.4175 L1383,2404.4175 L1373,2394.4175 L1175,2394.4175" fill="#FFFFFF" style="stroke:#000000;stroke-width:1;"/><path d="M1373,2394.4175 L1373,2404.4175 L1383,2404.4175 L1373,2394.4175" fill="#FFFFFF" style="stroke:#000000;stroke-width:1;"/><text fill="#000000" font-family="Verdana" font-size="13" lengthAdjust="spacing" textLength="187.9033" x="1181" y="2412.4873">Retry webhook with backoff:</text><text fill="#000000" font-family="Verdana" font-size="13" lengthAdjust="spacing" textLength="155.4668" x="1181" y="2428.2866">- Attempt 1: immediate</text><text fill="#000000" font-family="Verdana" font-size="13" lengthAdjust="spacing" textLength="134.437" x="1181" y="2444.0859">- Attempt 2: +1 min</text><text fill="#000000" font-family="Verdana" font-size="13" lengthAdjust="spacing" textLength="134.437" x="1181" y="2459.8853">- Attempt 3: +5 min</text><text fill="#000000" font-family="Verdana" font-size="13" lengthAdjust="spacing" textLength="171.6597" x="1181" y="2475.6846">- Give up after 3 attempts</text><g class="message" data-participant-1="BW" data-participant-2="BW"><line style="stroke:#000000;stroke-width:1;" x1="1170.8232" x2="1212.8232" y1="2526.0127" y2="2526.0127"/><line style="stroke:#000000;stroke-width:1;" x1="1212.8232" x2="1212.8232" y1="2526.0127" y2="2539.0127"/><line style="stroke:#000000;stroke-width:1;" x1="1171.8232" x2="1212.8232" y1="2539.0127" y2="2539.0127"/><polygon fill="#000000" points="1181.8232,2535.0127,1171.8232,2539.0127,1181.8232,2543.0127,1177.8232,2539.0127" style="stroke:#000000;stroke-width:1;"/><text fill="#000000" font-family="Verdana" font-size="13" lengthAdjust="spacing" textLength="154.1274" x="1177.8232" y="2505.4839">Retry webhook delivery</text><text fill="#000000" font-family="Verdana" font-size="13" lengthAdjust="spacing" textLength="171.5962" x="1177.8232" y="2521.2832">(with exponential backoff)</text></g><path d="M899.5713,2554.0127 L963.6206,2554.0127 L963.6206,2561.812 L953.6206,2571.812 L899.5713,2571.812 L899.5713,2554.0127" fill="#FFFFFF" style="stroke:#000000;stroke-width:1;"/><rect fill="none" height="221.5625" style="stroke:#000000;stroke-width:1;" width="792.6704" x="899.5713" y="2554.0127"/><text fill="#000000" font-family="Verdana" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="19.0493" x="914.5713" y="2568.0825">alt</text><text fill="#000000" font-family="Verdana" font-size="11" font-weight="bold" lengthAdjust="spacing" textLength="105.397" x="978.6206" y="2567.0718">[Retry succeeds]</text><g class="message" data-participant-1="WH" data-participant-2="BW"><polygon fill="#000000" points="1181.8232,2589.6113,1171.8232,2593.6113,1181.8232,2597.6113,1177.8232,2593.6113" style="stroke:#000000;stroke-width:1;"/><line style="stroke:#000000;stroke-width:1;stroke-dasharray:2,2;" x1="1175.8232" x2="1631.7197" y1="2593.6113" y2="2593.6113"/><text fill="#000000" font-family="Verdana" font-size="13" lengthAdjust="spacing" textLength="48.604" x="1187.8232" y="2588.8818">200 OK</text></g><g class="message" data-participant-1="BW" data-participant-2="DB"><polygon fill="#000000" points="964.1563,2635.21,954.1563,2639.21,964.1563,2643.21,960.1563,2639.21" style="stroke:#000000;stroke-width:1;"/><line style="stroke:#000000;stroke-width:1;" x1="958.1563" x2="1169.8232" y1="2639.21" y2="2639.21"/><text fill="#000000" font-family="Verdana" font-size="13" lengthAdjust="spacing" textLength="84.2969" x="970.1563" y="2618.6812">UPDATE jobs</text><text fill="#000000" font-family="Verdana" font-size="13" lengthAdjust="spacing" textLength="158.1772" x="970.1563" y="2634.4805">SET callbackSent = true</text></g><line style="stroke:#000000;stroke-width:1;stroke-dasharray:2,2;" x1="899.5713" x2="1692.2417" y1="2648.21" y2="2648.21"/><text fill="#000000" font-family="Verdana" font-size="11" font-weight="bold" lengthAdjust="spacing" textLength="95.8901" x="904.5713" y="2659.269">[All retries fail]</text><g class="message" data-participant-1="BW" data-participant-2="DB"><polygon fill="#000000" points="964.1563,2696.1772,954.1563,2700.1772,964.1563,2704.1772,960.1563,2700.1772" style="stroke:#000000;stroke-width:1;"/><line style="stroke:#000000;stroke-width:1;" x1="958.1563" x2="1169.8232" y1="2700.1772" y2="2700.1772"/><text fill="#000000" font-family="Verdana" font-size="13" lengthAdjust="spacing" textLength="84.2969" x="970.1563" y="2679.6484">UPDATE jobs</text><text fill="#000000" font-family="Verdana" font-size="13" lengthAdjust="spacing" textLength="161.9985" x="970.1563" y="2695.4478">SET callbackSent = false</text></g><path d="M1175,2713.1772 L1175,2770.1772 L1316,2770.1772 L1316,2723.1772 L1306,2713.1772 L1175,2713.1772" fill="#FFFFFF" style="stroke:#000000;stroke-width:1;"/><path d="M1306,2713.1772 L1306,2723.1772 L1316,2723.1772 L1306,2713.1772" fill="#FFFFFF" style="stroke:#000000;stroke-width:1;"/><text fill="#000000" font-family="Verdana" font-size="13" lengthAdjust="spacing" textLength="120.1738" x="1181" y="2731.2471">Job completed but</text><text fill="#000000" font-family="Verdana" font-size="13" lengthAdjust="spacing" textLength="96.7446" x="1181" y="2747.0464">callback failed.</text><text fill="#000000" font-family="Verdana" font-size="13" lengthAdjust="spacing" textLength="107.0659" x="1181" y="2762.8457">Client must poll.</text><rect fill="#FFFFFF" height="3" style="stroke:#FFFFFF;stroke-width:1;" width="1717.2417" x="5" y="2817.4749"/><line style="stroke:#000000;stroke-width:0.5;" x1="5" x2="1722.2417" y1="2817.4749" y2="2817.4749"/><line style="stroke:#000000;stroke-width:0.5;" x1="5" x2="1722.2417" y1="2820.4749" y2="2820.4749"/><rect fill="#FFFFFF" height="23.7993" style="stroke:#000000;stroke-width:1;" width="176.5508" x="775.3455" y="2806.5752"/><text fill="#000000" font-family="Verdana" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="158.1074" x="781.3455" y="2823.645">Client Polls for Status</text><g class="message" data-participant-1="Client" data-participant-2="API"><polygon fill="#000000" points="456.2534,2858.1738,466.2534,2862.1738,456.2534,2866.1738,460.2534,2862.1738" style="stroke:#000000;stroke-width:1;"/><line style="stroke:#000000;stroke-width:1;" x1="162.0874" x2="462.2534" y1="2862.1738" y2="2862.1738"/><text fill="#000000" font-family="Verdana" font-size="13" lengthAdjust="spacing" textLength="139.1851" x="169.0874" y="2857.4443">GET /jobs/job_jkl012</text></g><g class="message" data-participant-1="API" data-participant-2="DB"><polygon fill="#000000" points="941.1563,2919.5718,951.1563,2923.5718,941.1563,2927.5718,945.1563,2923.5718" style="stroke:#000000;stroke-width:1;"/><line style="stroke:#000000;stroke-width:1;" x1="468.2534" x2="947.1563" y1="2923.5718" y2="2923.5718"/><text fill="#000000" font-family="Verdana" font-size="13" lengthAdjust="spacing" textLength="136.5635" x="475.2534" y="2887.2437">SELECT * FROM jobs</text><text fill="#000000" font-family="Verdana" font-size="13" lengthAdjust="spacing" textLength="91.2095" x="475.2534" y="2903.043">WHERE id = ?</text><text fill="#000000" font-family="Verdana" font-size="13" lengthAdjust="spacing" textLength="115.8892" x="475.2534" y="2918.8423">AND tenantId = ?</text></g><path d="M129,2938.5718 L193.0493,2938.5718 L193.0493,2946.3711 L183.0493,2956.3711 L129,2956.3711 L129,2938.5718" fill="#FFFFFF" style="stroke:#000000;stroke-width:1;"/><rect fill="none" height="389.355" style="stroke:#000000;stroke-width:1;" width="877.7412" x="129" y="2938.5718"/><text fill="#000000" font-family="Verdana" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="19.0493" x="144" y="2952.6416">alt</text><text fill="#000000" font-family="Verdana" font-size="11" font-weight="bold" lengthAdjust="spacing" textLength="72.6279" x="208.0493" y="2951.6309">[Job found]</text><g class="message" data-participant-1="DB" data-participant-2="API"><polygon fill="#000000" points="479.2534,2974.1704,469.2534,2978.1704,479.2534,2982.1704,475.2534,2978.1704" style="stroke:#000000;stroke-width:1;"/><line style="stroke:#000000;stroke-width:1;stroke-dasharray:2,2;" x1="473.2534" x2="952.1563" y1="2978.1704" y2="2978.1704"/><text fill="#000000" font-family="Verdana" font-size="13" lengthAdjust="spacing" textLength="68.0723" x="485.2534" y="2973.4409">Job record</text></g><g class="message" data-participant-1="API" data-participant-2="Client"><polygon fill="#000000" points="173.0874,3240.9595,163.0874,3244.9595,173.0874,3248.9595,169.0874,3244.9595" style="stroke:#000000;stroke-width:1;"/><line style="stroke:#000000;stroke-width:1;stroke-dasharray:2,2;" x1="167.0874" x2="467.2534" y1="3244.9595" y2="3244.9595"/><text fill="#000000" font-family="Verdana" font-size="13" lengthAdjust="spacing" textLength="48.604" x="179.0874" y="3003.2402">200 OK</text><text fill="#000000" font-family="Verdana" font-size="13" lengthAdjust="spacing" textLength="8.252" x="179.0874" y="3019.0396">{</text><text fill="#000000" font-family="Verdana" font-size="13" lengthAdjust="spacing" textLength="119.9961" x="188.228" y="3034.8389">"id": "job_jkl012",</text><text fill="#000000" font-family="Verdana" font-size="13" lengthAdjust="spacing" textLength="176.979" x="188.228" y="3050.6382">"type": "SEND_MESSAGE",</text><text fill="#000000" font-family="Verdana" font-size="13" lengthAdjust="spacing" textLength="158.7041" x="188.228" y="3066.4375">"status": "COMPLETED",</text><text fill="#000000" font-family="Verdana" font-size="13" lengthAdjust="spacing" textLength="108.4053" x="188.228" y="3082.2368">"progress": 100,</text><text fill="#000000" font-family="Verdana" font-size="13" lengthAdjust="spacing" textLength="91.0698" x="188.228" y="3098.0361">"input": {...},</text><text fill="#000000" font-family="Verdana" font-size="13" lengthAdjust="spacing" textLength="73.3472" x="188.228" y="3113.8354">"output": {</text><text fill="#000000" font-family="Verdana" font-size="13" lengthAdjust="spacing" textLength="168.2256" x="197.3687" y="3129.6348">"messageId": "msg_xyz",</text><text fill="#000000" font-family="Verdana" font-size="13" lengthAdjust="spacing" textLength="196.314" x="197.3687" y="3145.4341">"content": "Based on your...",</text><text fill="#000000" font-family="Verdana" font-size="13" lengthAdjust="spacing" textLength="115.2544" x="197.3687" y="3161.2334">"metadata": {...}</text><text fill="#000000" font-family="Verdana" font-size="13" lengthAdjust="spacing" textLength="12.981" x="188.228" y="3177.0327">},</text><text fill="#000000" font-family="Verdana" font-size="13" lengthAdjust="spacing" textLength="258.1528" x="188.228" y="3192.832">"createdAt": "2024-01-15T10:12:00Z",</text><text fill="#000000" font-family="Verdana" font-size="13" lengthAdjust="spacing" textLength="255.5313" x="188.228" y="3208.6313">"startedAt": "2024-01-15T10:12:01Z",</text><text fill="#000000" font-family="Verdana" font-size="13" lengthAdjust="spacing" textLength="272.27" x="188.228" y="3224.4307">"completedAt": "2024-01-15T10:12:05Z"</text><text fill="#000000" font-family="Verdana" font-size="13" lengthAdjust="spacing" textLength="8.252" x="179.0874" y="3240.23">}</text></g><line style="stroke:#000000;stroke-width:1;stroke-dasharray:2,2;" x1="129" x2="1006.7412" y1="3253.9595" y2="3253.9595"/><text fill="#000000" font-family="Verdana" font-size="11" font-weight="bold" lengthAdjust="spacing" textLength="96.7871" x="134" y="3265.0186">[Job not found]</text><g class="message" data-participant-1="DB" data-participant-2="API"><polygon fill="#000000" points="479.2534,3286.1274,469.2534,3290.1274,479.2534,3294.1274,475.2534,3290.1274" style="stroke:#000000;stroke-width:1;"/><line style="stroke:#000000;stroke-width:1;stroke-dasharray:2,2;" x1="473.2534" x2="952.1563" y1="3290.1274" y2="3290.1274"/><text fill="#000000" font-family="Verdana" font-size="13" lengthAdjust="spacing" textLength="23.5879" x="485.2534" y="3285.3979">null</text></g><g class="message" data-participant-1="API" data-participant-2="Client"><polygon fill="#000000" points="173.0874,3315.9268,163.0874,3319.9268,173.0874,3323.9268,169.0874,3319.9268" style="stroke:#000000;stroke-width:1;"/><line style="stroke:#000000;stroke-width:1;stroke-dasharray:2,2;" x1="167.0874" x2="467.2534" y1="3319.9268" y2="3319.9268"/><text fill="#000000" font-family="Verdana" font-size="13" lengthAdjust="spacing" textLength="96.5859" x="179.0874" y="3315.1973">404 Not Found</text></g><path d="M799,3339.9268 L799,3601.9268 L1105,3601.9268 L1105,3349.9268 L1095,3339.9268 L799,3339.9268" fill="#FFFFFF" style="stroke:#000000;stroke-width:1;"/><path d="M1095,3339.9268 L1095,3349.9268 L1105,3349.9268 L1095,3339.9268" fill="#FFFFFF" style="stroke:#000000;stroke-width:1;"/><text fill="#000000" font-family="Verdana" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="132.8818" x="805" y="3357.9966">Jobs Table States:</text><text fill="#000000" font-family="Verdana" font-size="13" lengthAdjust="spacing" textLength="239.9414" x="805" y="3373.7959">&#8226; PENDING: Queued, not yet started</text><text fill="#000000" font-family="Verdana" font-size="13" lengthAdjust="spacing" textLength="285.4731" x="805" y="3389.5952">&#8226; PROCESSING: Worker actively processing</text><text fill="#000000" font-family="Verdana" font-size="13" lengthAdjust="spacing" textLength="237.6499" x="805" y="3405.3945">&#8226; COMPLETED: Finished successfully</text><text fill="#000000" font-family="Verdana" font-size="13" lengthAdjust="spacing" textLength="175.519" x="805" y="3421.1938">&#8226; FAILED: Processing error</text><text fill="#000000" font-family="Verdana" font-size="13" lengthAdjust="spacing" textLength="4.5703" x="805" y="3436.9932">&#160;</text><text fill="#000000" font-family="Verdana" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="109.2622" x="805" y="3452.7925">Progress Field:</text><text fill="#000000" font-family="Verdana" font-size="13" lengthAdjust="spacing" textLength="103.9238" x="805" y="3468.5918">&#8226; 0: Not started</text><text fill="#000000" font-family="Verdana" font-size="13" lengthAdjust="spacing" textLength="161.0591" x="805" y="3484.3911">&#8226; 10: Started processing</text><text fill="#000000" font-family="Verdana" font-size="13" lengthAdjust="spacing" textLength="212.418" x="805" y="3500.1904">&#8226; 50: Midway (optional updates)</text><text fill="#000000" font-family="Verdana" font-size="13" lengthAdjust="spacing" textLength="116.9175" x="805" y="3515.9897">&#8226; 100: Completed</text><text fill="#000000" font-family="Verdana" font-size="13" lengthAdjust="spacing" textLength="4.5703" x="805" y="3531.7891">&#160;</text><text fill="#000000" font-family="Verdana" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="64.0098" x="805" y="3547.5884">Cleanup:</text><text fill="#000000" font-family="Verdana" font-size="13" lengthAdjust="spacing" textLength="170.4219" x="805" y="3563.3877">Jobs can be deleted after:</text><text fill="#000000" font-family="Verdana" font-size="13" lengthAdjust="spacing" textLength="148.5161" x="805" y="3579.187">- 7 days for completed</text><text fill="#000000" font-family="Verdana" font-size="13" lengthAdjust="spacing" textLength="209.0918" x="805" y="3594.9863">- 30 days for failed (debugging)</text><path d="M1040,3612.7158 L1040,3827.7158 L1300,3827.7158 L1300,3622.7158 L1290,3612.7158 L1040,3612.7158" fill="#FFFFFF" style="stroke:#000000;stroke-width:1;"/><path d="M1290,3612.7158 L1290,3622.7158 L1300,3622.7158 L1290,3612.7158" fill="#FFFFFF" style="stroke:#000000;stroke-width:1;"/><text fill="#000000" font-family="Verdana" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="177.6582" x="1046" y="3630.7856">Worker Features (MVP):</text><text fill="#000000" font-family="Verdana" font-size="13" lengthAdjust="spacing" textLength="209.752" x="1046" y="3646.585">&#8226; In-memory queue with polling</text><text fill="#000000" font-family="Verdana" font-size="13" lengthAdjust="spacing" textLength="160.1958" x="1046" y="3662.3843">&#8226; Single worker instance</text><text fill="#000000" font-family="Verdana" font-size="13" lengthAdjust="spacing" textLength="176.9155" x="1046" y="3678.1836">&#8226; Processes 1 job at a time</text><text fill="#000000" font-family="Verdana" font-size="13" lengthAdjust="spacing" textLength="153.4102" x="1046" y="3693.9829">&#8226; Simple error handling</text><text fill="#000000" font-family="Verdana" font-size="13" lengthAdjust="spacing" textLength="4.5703" x="1046" y="3709.7822">&#160;</text><text fill="#000000" font-family="Verdana" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="151.2646" x="1046" y="3725.5815">Future (Production):</text><text fill="#000000" font-family="Verdana" font-size="13" lengthAdjust="spacing" textLength="239.9795" x="1046" y="3741.3809">&#8226; Redis/BullMQ for distributed queue</text><text fill="#000000" font-family="Verdana" font-size="13" lengthAdjust="spacing" textLength="177.728" x="1046" y="3757.1802">&#8226; Multiple worker instances</text><text fill="#000000" font-family="Verdana" font-size="13" lengthAdjust="spacing" textLength="109.8208" x="1046" y="3772.9795">&#8226; Priority queues</text><text fill="#000000" font-family="Verdana" font-size="13" lengthAdjust="spacing" textLength="122.3384" x="1046" y="3788.7788">&#8226; Job retry policies</text><text fill="#000000" font-family="Verdana" font-size="13" lengthAdjust="spacing" textLength="129.3589" x="1046" y="3804.5781">&#8226; Dead letter queue</text><text fill="#000000" font-family="Verdana" font-size="13" lengthAdjust="spacing" textLength="167.4956" x="1046" y="3820.3774">&#8226; Scheduled/delayed jobs</text><path d="M10,3838.1069 L10,4148.1069 L314,4148.1069 L314,3848.1069 L304,3838.1069 L10,3838.1069" fill="#FFFFFF" style="stroke:#000000;stroke-width:1;"/><path d="M304,3838.1069 L304,3848.1069 L314,3848.1069 L304,3838.1069" fill="#FFFFFF" style="stroke:#000000;stroke-width:1;"/><text fill="#000000" font-family="Verdana" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="113.9087" x="16" y="3856.1768">Client Patterns:</text><text fill="#000000" font-family="Verdana" font-size="13" lengthAdjust="spacing" textLength="4.5703" x="16" y="3871.9761">&#160;</text><text fill="#000000" font-family="Verdana" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="127.9053" x="16" y="3887.7754">Pattern 1: Polling</text><text fill="#000000" font-family="Verdana" font-size="13" lengthAdjust="spacing" textLength="225.0942" x="16" y="3903.5747">while (status !== 'COMPLETED') {</text><text fill="#000000" font-family="Verdana" font-size="13" lengthAdjust="spacing" textLength="124.2109" x="25.1406" y="3919.374">await sleep(2000);</text><text fill="#000000" font-family="Verdana" font-size="13" lengthAdjust="spacing" textLength="247.1396" x="25.1406" y="3935.1733">status = await fetchJobStatus(jobId);</text><text fill="#000000" font-family="Verdana" font-size="13" lengthAdjust="spacing" textLength="8.252" x="16" y="3950.9727">}</text><text fill="#000000" font-family="Verdana" font-size="13" lengthAdjust="spacing" textLength="4.5703" x="16" y="3966.772">&#160;</text><text fill="#000000" font-family="Verdana" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="145.9961" x="16" y="3982.5713">Pattern 2: Webhook</text><text fill="#000000" font-family="Verdana" font-size="13" lengthAdjust="spacing" textLength="176.7441" x="16" y="3998.3706">// Submit job with callback</text><text fill="#000000" font-family="Verdana" font-size="13" lengthAdjust="spacing" textLength="120.0024" x="16" y="4014.1699">await submitJob({</text><text fill="#000000" font-family="Verdana" font-size="13" lengthAdjust="spacing" textLength="47.7534" x="25.1406" y="4029.9692">...data,</text><text fill="#000000" font-family="Verdana" font-size="13" lengthAdjust="spacing" textLength="258.1655" x="25.1406" y="4045.7686">callbackUrl: "https://myapp.com/hook"</text><text fill="#000000" font-family="Verdana" font-size="13" lengthAdjust="spacing" textLength="20.0586" x="16" y="4061.5679">});</text><text fill="#000000" font-family="Verdana" font-size="13" lengthAdjust="spacing" textLength="230.6611" x="16" y="4077.3672">// Wait for webhook POST to arrive</text><text fill="#000000" font-family="Verdana" font-size="13" lengthAdjust="spacing" textLength="4.5703" x="16" y="4093.1665">&#160;</text><text fill="#000000" font-family="Verdana" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="126.2041" x="16" y="4108.9658">Pattern 3: Hybrid</text><text fill="#000000" font-family="Verdana" font-size="13" lengthAdjust="spacing" textLength="283.7593" x="16" y="4124.7651">// Submit with callback, but poll as fallback</text><text fill="#000000" font-family="Verdana" font-size="13" lengthAdjust="spacing" textLength="225.9004" x="16" y="4140.5645">// if webhook doesn't arrive in 30s</text><!--SRC=[lLXVSnh94N_VJz577WoA421RkMHJofKG864B2RCuIgweSWti8EQqpExjp4hUSwdgFai-MZv9kcTcbrsaS-nxEFmWCztJ__lNFNodDtpB8OcOa9ww5p9XATl2agtkxz8ua-5v7CKf_6aqf7-UfuMEE9ofNAvW4eSSsl0sNiBxZ6SSfanhdahFOokDbyuZmQNsKA8MAv4mgQ5nDXt31TFyaUKDO0hmUvs1f0KyVH0hRXZU1bx8D5ionQ4nZPM-Itdm_ihG1ltwtNvfzKBUnkazJmrR_xREDk5AiJjUKpC9wZotVBc9utj3kxtqlDDJvmu4sN8hj78ncF6VCwuqd9vwdcDe_uEyyc5w4yoXer2PYANg-2BiRArcrM5qUI7_rHw7V9l4cijLtdx7Sn-swkwZeNxy_gz_MyZF2mdGMCKIMNJ3nm1A5kM_SDZc436bYLpv_0MsoBfH4Az1fqmgp0HfRnnQEIoAABKVqeXaRRHEbD_fR7EM94UhUDlP4sS-ZpOKgh2-ZOn9n3LlBEIJvr56qUMtWG-hb6DgCOFDXTHvmdq8XjU3ZvDX49nT3D44BAzC-_3vwEZe2RzMp5d8bkUz3KZIeE_3-3eOpkRmKxnK2zb4tp4fu_0GIEeX637r-uUWDDEPmh2Zol7r1PAJDCPYKNZMHU63FhITdIXs7C8f_VtuqttKxHrRtKNcg0QjBs6H0NE5OhQxus9gzHB9QNRdIHn5BiuTbeZEGwz3xdGg0dRnGyssUdmuxXx3sMh5apz4kyJQWrJSRJILZEjOLyWh9a76ZxxNEu8foWF42XTcu39COe6ynqTmouI6DJQygnGeykAzFe9ph4SX4HmUXTv0Z2AG3tlJGmb0sarlxJeNREF2LApk5Nn8J3AekuobyGEIi9yTKvf91Ikh8SvKbFlUVt_z3unbUyktSPh3pmQNcfD_Jbk6GcwWyIWbXrxx11J7sw4oj56cinHhTiP3eJhzB8ecxojMzc-BuWo6LyFpEHp0Q7OpSJLwUpcS3OlWdC8hburN2tap6mndqFztKL5dsBDNuybu3hs57DtCuCDqS3OVGl1kF8Mhc_Dtmq5PhFrRMunh4vdcBdcjgZrEW3Ka6CwhPinkph7xo1Ai2pnFZGL8miGsMvKcmQDUTxyUI7z0bm3PLeHayixaQsg_GW6bpUiutR88Hb7ys3BfikPDiDlSLSUAqE0W4ViPMzWY6s733WaH20qUx8n1CnYEgJMA9qGsq5k0gR-GRRYAMMWgWN_IzFqSIv0qFw3Ob0u2d4WeZAi4uP3JILyWIqOYF6yI5DOMdZdfY5G8G8hpqjLf6Ga81Rl3QOcMieW6mue87c7c92ZpLzn3rLcaNKSxwUCG-vCG_rF-YsrS5m-VXfdY8SGIyZXBQxXS0NRO28MEvMYclR_bcj6yT21hUfpkV5MrdDzCfbV3-N10nH9d6b4MZt_OhvAkoPkT0PLYiegU5v11qu8Tb8tI6jihzpmUgLf4Hqn4s8JxCHocQOmnQ1O9XJNoSQeVBROSBJq4hbT7hM_mTNGslhAESX9UPEcPkx_3MMiSGOVfbO0mnEqJfYu96g4frfJijRX3VyDgptmPOWGDhXyMyknw09Nv1-C0hc_cSFtXwigMOwdfm-ogeidOlGSl1fehmgfXlBrqcyppPQ5S31PoVpNubi5LLfsZsC93ocTRzOsoMHhxtL9VZMeTKtQ44M2Reb5s1S2JsuXsgIKHE7pVjBkzTkzatklwlME_U_9ZesmY2ckHI5NfTlhSNfOXFUvsuUQTLvA-K8z5q0EQjwVOsHctzqnZ5BhMbQxOqpMtzGyuVKqTxxJkrsP9c76Dqw-OrIRtP4AyNlibJnlES9NV9XfwFeZj5aSYpguNoCS-_Ba7MtmyFAUzHjh97kr2F7384c1hV2d0Qs2MTnV7tS2jXu-ShLiUyaZG84TSC4xmJmZj64U1SyWvrDf9eTpP-oPpFDofV3bzLUetPh3qXP9uXbCcHSM2AvF8tobupL1OxUvl9fW-TT1TPhf6BMGxg3gg4TtsjytmMKDhP9rQvgTou1L_2yXp8kosHPjXu73t-Ilf0btTNqtBHyNNGs7nHA0JYt_btbH5l7AzJt7nIqDR7iytS2g00iB4o_X5Bn4YL5yu_nVQYhc2D3j6IRvqQESUHNyu0XPhwSlur_rnvrNw1RvUmVVLY6gwWtA1vVGRcPAu9RoSepVTDt2DzqRcdgcxtGDXqFSE3b2oWZbRHjnK7-w91mVs3M1NSz_-Q86FIjAVSmtEGyjKBiv-yIAXZUk1Htbr5oRMCia-Z8GKQhE_vPZ7XLat_Egku_3wu61QR1iZmQEmCBFh6mUhHc40xJgE6lQCE47IH8IFB8TcdD1gY2YO9I4vtdANaUMyI0xfFOyuarb22asmwBstv8Ih1ZGCHFjU6xw7aEMsZylaul7hxkxSuWWqGxxCxkxGg5RbvLHxkHqSk72EiEnmg2dxEYkytd-w6MGd52eS3V0_cD97AqJGcqQkkCsP3GcAx15Eu6m11hGWkejakeqwR9WCZKYqnxxxe8dNmynirQKrrQUWyHE_8f8ZdAApna33Di75NYJFhLBEB16dGZkFx9c589f6w9jO2NSyuFYAmVZIRDo93rPOKXd6juEfOJcg9XHyCS3k0K-vjGXiVv4pjK-LPh_IK9_QcEBvumPp1qst6dztMdi8jE0pzXzxf2U-YZXFceYEtTRVyR3SfIrrZHlu1lsoKDyqcn_oFLNruhRWTXhKs-cutz9CicexgESK6ZBzdaH686uHX1rwKDrLN_mPo_nqvpsXUbJoxES9iyxg65YQOaDNxSEDvJ9VfYAicLSpxP26gQb8UeYk2uEH6nVwSZM9kPAljDE0zO3DKadO_m00]--></g></svg>